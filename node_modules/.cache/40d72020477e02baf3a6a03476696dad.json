{"remainingRequest":"/Users/adamliu/works/vant/node_modules/babel-loader/lib/index.js!/Users/adamliu/works/vant/node_modules/object-inspect/index.js","dependencies":[{"path":"/Users/adamliu/works/vant/node_modules/object-inspect/index.js","mtime":1694509795251},{"path":"/Users/adamliu/works/vant/babel.config.js","mtime":1694509704583},{"path":"/Users/adamliu/works/vant/node_modules/cache-loader/dist/cjs.js","mtime":1694509793427},{"path":"/Users/adamliu/works/vant/node_modules/babel-loader/lib/index.js","mtime":1694509794381}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIGhhc01hcCA9IHR5cGVvZiBNYXAgPT09ICdmdW5jdGlvbicgJiYgTWFwLnByb3RvdHlwZTsKdmFyIG1hcFNpemVEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciAmJiBoYXNNYXAgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE1hcC5wcm90b3R5cGUsICdzaXplJykgOiBudWxsOwp2YXIgbWFwU2l6ZSA9IGhhc01hcCAmJiBtYXBTaXplRGVzY3JpcHRvciAmJiB0eXBlb2YgbWFwU2l6ZURlc2NyaXB0b3IuZ2V0ID09PSAnZnVuY3Rpb24nID8gbWFwU2l6ZURlc2NyaXB0b3IuZ2V0IDogbnVsbDsKdmFyIG1hcEZvckVhY2ggPSBoYXNNYXAgJiYgTWFwLnByb3RvdHlwZS5mb3JFYWNoOwp2YXIgaGFzU2V0ID0gdHlwZW9mIFNldCA9PT0gJ2Z1bmN0aW9uJyAmJiBTZXQucHJvdG90eXBlOwp2YXIgc2V0U2l6ZURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yICYmIGhhc1NldCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoU2V0LnByb3RvdHlwZSwgJ3NpemUnKSA6IG51bGw7CnZhciBzZXRTaXplID0gaGFzU2V0ICYmIHNldFNpemVEZXNjcmlwdG9yICYmIHR5cGVvZiBzZXRTaXplRGVzY3JpcHRvci5nZXQgPT09ICdmdW5jdGlvbicgPyBzZXRTaXplRGVzY3JpcHRvci5nZXQgOiBudWxsOwp2YXIgc2V0Rm9yRWFjaCA9IGhhc1NldCAmJiBTZXQucHJvdG90eXBlLmZvckVhY2g7CnZhciBoYXNXZWFrTWFwID0gdHlwZW9mIFdlYWtNYXAgPT09ICdmdW5jdGlvbicgJiYgV2Vha01hcC5wcm90b3R5cGU7CnZhciB3ZWFrTWFwSGFzID0gaGFzV2Vha01hcCA/IFdlYWtNYXAucHJvdG90eXBlLmhhcyA6IG51bGw7CnZhciBoYXNXZWFrU2V0ID0gdHlwZW9mIFdlYWtTZXQgPT09ICdmdW5jdGlvbicgJiYgV2Vha1NldC5wcm90b3R5cGU7CnZhciB3ZWFrU2V0SGFzID0gaGFzV2Vha1NldCA/IFdlYWtTZXQucHJvdG90eXBlLmhhcyA6IG51bGw7CnZhciBoYXNXZWFrUmVmID0gdHlwZW9mIFdlYWtSZWYgPT09ICdmdW5jdGlvbicgJiYgV2Vha1JlZi5wcm90b3R5cGU7CnZhciB3ZWFrUmVmRGVyZWYgPSBoYXNXZWFrUmVmID8gV2Vha1JlZi5wcm90b3R5cGUuZGVyZWYgOiBudWxsOwp2YXIgYm9vbGVhblZhbHVlT2YgPSBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mOwp2YXIgb2JqZWN0VG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwp2YXIgZnVuY3Rpb25Ub1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZzsKdmFyICRtYXRjaCA9IFN0cmluZy5wcm90b3R5cGUubWF0Y2g7CnZhciAkc2xpY2UgPSBTdHJpbmcucHJvdG90eXBlLnNsaWNlOwp2YXIgJHJlcGxhY2UgPSBTdHJpbmcucHJvdG90eXBlLnJlcGxhY2U7CnZhciAkdG9VcHBlckNhc2UgPSBTdHJpbmcucHJvdG90eXBlLnRvVXBwZXJDYXNlOwp2YXIgJHRvTG93ZXJDYXNlID0gU3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZTsKdmFyICR0ZXN0ID0gUmVnRXhwLnByb3RvdHlwZS50ZXN0Owp2YXIgJGNvbmNhdCA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQ7CnZhciAkam9pbiA9IEFycmF5LnByb3RvdHlwZS5qb2luOwp2YXIgJGFyclNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwp2YXIgJGZsb29yID0gTWF0aC5mbG9vcjsKdmFyIGJpZ0ludFZhbHVlT2YgPSB0eXBlb2YgQmlnSW50ID09PSAnZnVuY3Rpb24nID8gQmlnSW50LnByb3RvdHlwZS52YWx1ZU9mIDogbnVsbDsKdmFyIGdPUFMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzOwp2YXIgc3ltVG9TdHJpbmcgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICdzeW1ib2wnID8gU3ltYm9sLnByb3RvdHlwZS50b1N0cmluZyA6IG51bGw7CnZhciBoYXNTaGFtbWVkU3ltYm9scyA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gJ29iamVjdCc7Ci8vIGllLCBgaGFzLXRvc3RyaW5ndGFnL3NoYW1zCnZhciB0b1N0cmluZ1RhZyA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLnRvU3RyaW5nVGFnICYmICh0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnID09PSBoYXNTaGFtbWVkU3ltYm9scyA/ICdvYmplY3QnIDogJ3N5bWJvbCcpID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogbnVsbDsKdmFyIGlzRW51bWVyYWJsZSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7CnZhciBnUE8gPSAodHlwZW9mIFJlZmxlY3QgPT09ICdmdW5jdGlvbicgPyBSZWZsZWN0LmdldFByb3RvdHlwZU9mIDogT2JqZWN0LmdldFByb3RvdHlwZU9mKSB8fCAoW10uX19wcm90b19fID09PSBBcnJheS5wcm90b3R5cGUgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90bwo/IGZ1bmN0aW9uIChPKSB7CiAgcmV0dXJuIE8uX19wcm90b19fOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb3RvCn0gOiBudWxsKTsKZnVuY3Rpb24gYWRkTnVtZXJpY1NlcGFyYXRvcihudW0sIHN0cikgewogIGlmIChudW0gPT09IEluZmluaXR5IHx8IG51bSA9PT0gLUluZmluaXR5IHx8IG51bSAhPT0gbnVtIHx8IG51bSAmJiBudW0gPiAtMTAwMCAmJiBudW0gPCAxMDAwIHx8ICR0ZXN0LmNhbGwoL2UvLCBzdHIpKSB7CiAgICByZXR1cm4gc3RyOwogIH0KICB2YXIgc2VwUmVnZXggPSAvWzAtOV0oPz0oPzpbMC05XXszfSkrKD8hWzAtOV0pKS9nOwogIGlmICh0eXBlb2YgbnVtID09PSAnbnVtYmVyJykgewogICAgdmFyIF9pbnQgPSBudW0gPCAwID8gLSRmbG9vcigtbnVtKSA6ICRmbG9vcihudW0pOyAvLyB0cnVuYyhudW0pCiAgICBpZiAoX2ludCAhPT0gbnVtKSB7CiAgICAgIHZhciBpbnRTdHIgPSBTdHJpbmcoX2ludCk7CiAgICAgIHZhciBkZWMgPSAkc2xpY2UuY2FsbChzdHIsIGludFN0ci5sZW5ndGggKyAxKTsKICAgICAgcmV0dXJuICRyZXBsYWNlLmNhbGwoaW50U3RyLCBzZXBSZWdleCwgJyQmXycpICsgJy4nICsgJHJlcGxhY2UuY2FsbCgkcmVwbGFjZS5jYWxsKGRlYywgLyhbMC05XXszfSkvZywgJyQmXycpLCAvXyQvLCAnJyk7CiAgICB9CiAgfQogIHJldHVybiAkcmVwbGFjZS5jYWxsKHN0ciwgc2VwUmVnZXgsICckJl8nKTsKfQp2YXIgdXRpbEluc3BlY3QgPSByZXF1aXJlKCcuL3V0aWwuaW5zcGVjdCcpOwp2YXIgaW5zcGVjdEN1c3RvbSA9IHV0aWxJbnNwZWN0LmN1c3RvbTsKdmFyIGluc3BlY3RTeW1ib2wgPSBpc1N5bWJvbChpbnNwZWN0Q3VzdG9tKSA/IGluc3BlY3RDdXN0b20gOiBudWxsOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluc3BlY3RfKG9iaiwgb3B0aW9ucywgZGVwdGgsIHNlZW4pIHsKICB2YXIgb3B0cyA9IG9wdGlvbnMgfHwge307CiAgaWYgKGhhcyhvcHRzLCAncXVvdGVTdHlsZScpICYmIG9wdHMucXVvdGVTdHlsZSAhPT0gJ3NpbmdsZScgJiYgb3B0cy5xdW90ZVN0eWxlICE9PSAnZG91YmxlJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uICJxdW90ZVN0eWxlIiBtdXN0IGJlICJzaW5nbGUiIG9yICJkb3VibGUiJyk7CiAgfQogIGlmIChoYXMob3B0cywgJ21heFN0cmluZ0xlbmd0aCcpICYmICh0eXBlb2Ygb3B0cy5tYXhTdHJpbmdMZW5ndGggPT09ICdudW1iZXInID8gb3B0cy5tYXhTdHJpbmdMZW5ndGggPCAwICYmIG9wdHMubWF4U3RyaW5nTGVuZ3RoICE9PSBJbmZpbml0eSA6IG9wdHMubWF4U3RyaW5nTGVuZ3RoICE9PSBudWxsKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uICJtYXhTdHJpbmdMZW5ndGgiLCBpZiBwcm92aWRlZCwgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIsIEluZmluaXR5LCBvciBgbnVsbGAnKTsKICB9CiAgdmFyIGN1c3RvbUluc3BlY3QgPSBoYXMob3B0cywgJ2N1c3RvbUluc3BlY3QnKSA/IG9wdHMuY3VzdG9tSW5zcGVjdCA6IHRydWU7CiAgaWYgKHR5cGVvZiBjdXN0b21JbnNwZWN0ICE9PSAnYm9vbGVhbicgJiYgY3VzdG9tSW5zcGVjdCAhPT0gJ3N5bWJvbCcpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbiAiY3VzdG9tSW5zcGVjdCIsIGlmIHByb3ZpZGVkLCBtdXN0IGJlIGB0cnVlYCwgYGZhbHNlYCwgb3IgYFwnc3ltYm9sXCdgJyk7CiAgfQogIGlmIChoYXMob3B0cywgJ2luZGVudCcpICYmIG9wdHMuaW5kZW50ICE9PSBudWxsICYmIG9wdHMuaW5kZW50ICE9PSAnXHQnICYmICEocGFyc2VJbnQob3B0cy5pbmRlbnQsIDEwKSA9PT0gb3B0cy5pbmRlbnQgJiYgb3B0cy5pbmRlbnQgPiAwKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uICJpbmRlbnQiIG11c3QgYmUgIlxcdCIsIGFuIGludGVnZXIgPiAwLCBvciBgbnVsbGAnKTsKICB9CiAgaWYgKGhhcyhvcHRzLCAnbnVtZXJpY1NlcGFyYXRvcicpICYmIHR5cGVvZiBvcHRzLm51bWVyaWNTZXBhcmF0b3IgIT09ICdib29sZWFuJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uICJudW1lcmljU2VwYXJhdG9yIiwgaWYgcHJvdmlkZWQsIG11c3QgYmUgYHRydWVgIG9yIGBmYWxzZWAnKTsKICB9CiAgdmFyIG51bWVyaWNTZXBhcmF0b3IgPSBvcHRzLm51bWVyaWNTZXBhcmF0b3I7CiAgaWYgKHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7CiAgICByZXR1cm4gJ3VuZGVmaW5lZCc7CiAgfQogIGlmIChvYmogPT09IG51bGwpIHsKICAgIHJldHVybiAnbnVsbCc7CiAgfQogIGlmICh0eXBlb2Ygb2JqID09PSAnYm9vbGVhbicpIHsKICAgIHJldHVybiBvYmogPyAndHJ1ZScgOiAnZmFsc2UnOwogIH0KICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHsKICAgIHJldHVybiBpbnNwZWN0U3RyaW5nKG9iaiwgb3B0cyk7CiAgfQogIGlmICh0eXBlb2Ygb2JqID09PSAnbnVtYmVyJykgewogICAgaWYgKG9iaiA9PT0gMCkgewogICAgICByZXR1cm4gSW5maW5pdHkgLyBvYmogPiAwID8gJzAnIDogJy0wJzsKICAgIH0KICAgIHZhciBzdHIgPSBTdHJpbmcob2JqKTsKICAgIHJldHVybiBudW1lcmljU2VwYXJhdG9yID8gYWRkTnVtZXJpY1NlcGFyYXRvcihvYmosIHN0cikgOiBzdHI7CiAgfQogIGlmICh0eXBlb2Ygb2JqID09PSAnYmlnaW50JykgewogICAgdmFyIGJpZ0ludFN0ciA9IFN0cmluZyhvYmopICsgJ24nOwogICAgcmV0dXJuIG51bWVyaWNTZXBhcmF0b3IgPyBhZGROdW1lcmljU2VwYXJhdG9yKG9iaiwgYmlnSW50U3RyKSA6IGJpZ0ludFN0cjsKICB9CiAgdmFyIG1heERlcHRoID0gdHlwZW9mIG9wdHMuZGVwdGggPT09ICd1bmRlZmluZWQnID8gNSA6IG9wdHMuZGVwdGg7CiAgaWYgKHR5cGVvZiBkZXB0aCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgIGRlcHRoID0gMDsKICB9CiAgaWYgKGRlcHRoID49IG1heERlcHRoICYmIG1heERlcHRoID4gMCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JykgewogICAgcmV0dXJuIGlzQXJyYXkob2JqKSA/ICdbQXJyYXldJyA6ICdbT2JqZWN0XSc7CiAgfQogIHZhciBpbmRlbnQgPSBnZXRJbmRlbnQob3B0cywgZGVwdGgpOwogIGlmICh0eXBlb2Ygc2VlbiA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgIHNlZW4gPSBbXTsKICB9IGVsc2UgaWYgKGluZGV4T2Yoc2Vlbiwgb2JqKSA+PSAwKSB7CiAgICByZXR1cm4gJ1tDaXJjdWxhcl0nOwogIH0KICBmdW5jdGlvbiBpbnNwZWN0KHZhbHVlLCBmcm9tLCBub0luZGVudCkgewogICAgaWYgKGZyb20pIHsKICAgICAgc2VlbiA9ICRhcnJTbGljZS5jYWxsKHNlZW4pOwogICAgICBzZWVuLnB1c2goZnJvbSk7CiAgICB9CiAgICBpZiAobm9JbmRlbnQpIHsKICAgICAgdmFyIG5ld09wdHMgPSB7CiAgICAgICAgZGVwdGg6IG9wdHMuZGVwdGgKICAgICAgfTsKICAgICAgaWYgKGhhcyhvcHRzLCAncXVvdGVTdHlsZScpKSB7CiAgICAgICAgbmV3T3B0cy5xdW90ZVN0eWxlID0gb3B0cy5xdW90ZVN0eWxlOwogICAgICB9CiAgICAgIHJldHVybiBpbnNwZWN0Xyh2YWx1ZSwgbmV3T3B0cywgZGVwdGggKyAxLCBzZWVuKTsKICAgIH0KICAgIHJldHVybiBpbnNwZWN0Xyh2YWx1ZSwgb3B0cywgZGVwdGggKyAxLCBzZWVuKTsKICB9CiAgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicgJiYgIWlzUmVnRXhwKG9iaikpIHsKICAgIC8vIGluIG9sZGVyIGVuZ2luZXMsIHJlZ2V4ZXMgYXJlIGNhbGxhYmxlCiAgICB2YXIgbmFtZSA9IG5hbWVPZihvYmopOwogICAgdmFyIGtleXMgPSBhcnJPYmpLZXlzKG9iaiwgaW5zcGVjdCk7CiAgICByZXR1cm4gJ1tGdW5jdGlvbicgKyAobmFtZSA/ICc6ICcgKyBuYW1lIDogJyAoYW5vbnltb3VzKScpICsgJ10nICsgKGtleXMubGVuZ3RoID4gMCA/ICcgeyAnICsgJGpvaW4uY2FsbChrZXlzLCAnLCAnKSArICcgfScgOiAnJyk7CiAgfQogIGlmIChpc1N5bWJvbChvYmopKSB7CiAgICB2YXIgc3ltU3RyaW5nID0gaGFzU2hhbW1lZFN5bWJvbHMgPyAkcmVwbGFjZS5jYWxsKFN0cmluZyhvYmopLCAvXihTeW1ib2xcKC4qXCkpX1teKV0qJC8sICckMScpIDogc3ltVG9TdHJpbmcuY2FsbChvYmopOwogICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmICFoYXNTaGFtbWVkU3ltYm9scyA/IG1hcmtCb3hlZChzeW1TdHJpbmcpIDogc3ltU3RyaW5nOwogIH0KICBpZiAoaXNFbGVtZW50KG9iaikpIHsKICAgIHZhciBzID0gJzwnICsgJHRvTG93ZXJDYXNlLmNhbGwoU3RyaW5nKG9iai5ub2RlTmFtZSkpOwogICAgdmFyIGF0dHJzID0gb2JqLmF0dHJpYnV0ZXMgfHwgW107CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHMgKz0gJyAnICsgYXR0cnNbaV0ubmFtZSArICc9JyArIHdyYXBRdW90ZXMocXVvdGUoYXR0cnNbaV0udmFsdWUpLCAnZG91YmxlJywgb3B0cyk7CiAgICB9CiAgICBzICs9ICc+JzsKICAgIGlmIChvYmouY2hpbGROb2RlcyAmJiBvYmouY2hpbGROb2Rlcy5sZW5ndGgpIHsKICAgICAgcyArPSAnLi4uJzsKICAgIH0KICAgIHMgKz0gJzwvJyArICR0b0xvd2VyQ2FzZS5jYWxsKFN0cmluZyhvYmoubm9kZU5hbWUpKSArICc+JzsKICAgIHJldHVybiBzOwogIH0KICBpZiAoaXNBcnJheShvYmopKSB7CiAgICBpZiAob2JqLmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm4gJ1tdJzsKICAgIH0KICAgIHZhciB4cyA9IGFyck9iaktleXMob2JqLCBpbnNwZWN0KTsKICAgIGlmIChpbmRlbnQgJiYgIXNpbmdsZUxpbmVWYWx1ZXMoeHMpKSB7CiAgICAgIHJldHVybiAnWycgKyBpbmRlbnRlZEpvaW4oeHMsIGluZGVudCkgKyAnXSc7CiAgICB9CiAgICByZXR1cm4gJ1sgJyArICRqb2luLmNhbGwoeHMsICcsICcpICsgJyBdJzsKICB9CiAgaWYgKGlzRXJyb3Iob2JqKSkgewogICAgdmFyIHBhcnRzID0gYXJyT2JqS2V5cyhvYmosIGluc3BlY3QpOwogICAgaWYgKCEoJ2NhdXNlJyBpbiBFcnJvci5wcm90b3R5cGUpICYmICdjYXVzZScgaW4gb2JqICYmICFpc0VudW1lcmFibGUuY2FsbChvYmosICdjYXVzZScpKSB7CiAgICAgIHJldHVybiAneyBbJyArIFN0cmluZyhvYmopICsgJ10gJyArICRqb2luLmNhbGwoJGNvbmNhdC5jYWxsKCdbY2F1c2VdOiAnICsgaW5zcGVjdChvYmouY2F1c2UpLCBwYXJ0cyksICcsICcpICsgJyB9JzsKICAgIH0KICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuICdbJyArIFN0cmluZyhvYmopICsgJ10nOwogICAgfQogICAgcmV0dXJuICd7IFsnICsgU3RyaW5nKG9iaikgKyAnXSAnICsgJGpvaW4uY2FsbChwYXJ0cywgJywgJykgKyAnIH0nOwogIH0KICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgY3VzdG9tSW5zcGVjdCkgewogICAgaWYgKGluc3BlY3RTeW1ib2wgJiYgdHlwZW9mIG9ialtpbnNwZWN0U3ltYm9sXSA9PT0gJ2Z1bmN0aW9uJyAmJiB1dGlsSW5zcGVjdCkgewogICAgICByZXR1cm4gdXRpbEluc3BlY3Qob2JqLCB7CiAgICAgICAgZGVwdGg6IG1heERlcHRoIC0gZGVwdGgKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKGN1c3RvbUluc3BlY3QgIT09ICdzeW1ib2wnICYmIHR5cGVvZiBvYmouaW5zcGVjdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICByZXR1cm4gb2JqLmluc3BlY3QoKTsKICAgIH0KICB9CiAgaWYgKGlzTWFwKG9iaikpIHsKICAgIHZhciBtYXBQYXJ0cyA9IFtdOwogICAgaWYgKG1hcEZvckVhY2gpIHsKICAgICAgbWFwRm9yRWFjaC5jYWxsKG9iaiwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHsKICAgICAgICBtYXBQYXJ0cy5wdXNoKGluc3BlY3Qoa2V5LCBvYmosIHRydWUpICsgJyA9PiAnICsgaW5zcGVjdCh2YWx1ZSwgb2JqKSk7CiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIGNvbGxlY3Rpb25PZignTWFwJywgbWFwU2l6ZS5jYWxsKG9iaiksIG1hcFBhcnRzLCBpbmRlbnQpOwogIH0KICBpZiAoaXNTZXQob2JqKSkgewogICAgdmFyIHNldFBhcnRzID0gW107CiAgICBpZiAoc2V0Rm9yRWFjaCkgewogICAgICBzZXRGb3JFYWNoLmNhbGwob2JqLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBzZXRQYXJ0cy5wdXNoKGluc3BlY3QodmFsdWUsIG9iaikpOwogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBjb2xsZWN0aW9uT2YoJ1NldCcsIHNldFNpemUuY2FsbChvYmopLCBzZXRQYXJ0cywgaW5kZW50KTsKICB9CiAgaWYgKGlzV2Vha01hcChvYmopKSB7CiAgICByZXR1cm4gd2Vha0NvbGxlY3Rpb25PZignV2Vha01hcCcpOwogIH0KICBpZiAoaXNXZWFrU2V0KG9iaikpIHsKICAgIHJldHVybiB3ZWFrQ29sbGVjdGlvbk9mKCdXZWFrU2V0Jyk7CiAgfQogIGlmIChpc1dlYWtSZWYob2JqKSkgewogICAgcmV0dXJuIHdlYWtDb2xsZWN0aW9uT2YoJ1dlYWtSZWYnKTsKICB9CiAgaWYgKGlzTnVtYmVyKG9iaikpIHsKICAgIHJldHVybiBtYXJrQm94ZWQoaW5zcGVjdChOdW1iZXIob2JqKSkpOwogIH0KICBpZiAoaXNCaWdJbnQob2JqKSkgewogICAgcmV0dXJuIG1hcmtCb3hlZChpbnNwZWN0KGJpZ0ludFZhbHVlT2YuY2FsbChvYmopKSk7CiAgfQogIGlmIChpc0Jvb2xlYW4ob2JqKSkgewogICAgcmV0dXJuIG1hcmtCb3hlZChib29sZWFuVmFsdWVPZi5jYWxsKG9iaikpOwogIH0KICBpZiAoaXNTdHJpbmcob2JqKSkgewogICAgcmV0dXJuIG1hcmtCb3hlZChpbnNwZWN0KFN0cmluZyhvYmopKSk7CiAgfQogIGlmICghaXNEYXRlKG9iaikgJiYgIWlzUmVnRXhwKG9iaikpIHsKICAgIHZhciB5cyA9IGFyck9iaktleXMob2JqLCBpbnNwZWN0KTsKICAgIHZhciBpc1BsYWluT2JqZWN0ID0gZ1BPID8gZ1BPKG9iaikgPT09IE9iamVjdC5wcm90b3R5cGUgOiBvYmogaW5zdGFuY2VvZiBPYmplY3QgfHwgb2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3Q7CiAgICB2YXIgcHJvdG9UYWcgPSBvYmogaW5zdGFuY2VvZiBPYmplY3QgPyAnJyA6ICdudWxsIHByb3RvdHlwZSc7CiAgICB2YXIgc3RyaW5nVGFnID0gIWlzUGxhaW5PYmplY3QgJiYgdG9TdHJpbmdUYWcgJiYgT2JqZWN0KG9iaikgPT09IG9iaiAmJiB0b1N0cmluZ1RhZyBpbiBvYmogPyAkc2xpY2UuY2FsbCh0b1N0cihvYmopLCA4LCAtMSkgOiBwcm90b1RhZyA/ICdPYmplY3QnIDogJyc7CiAgICB2YXIgY29uc3RydWN0b3JUYWcgPSBpc1BsYWluT2JqZWN0IHx8IHR5cGVvZiBvYmouY29uc3RydWN0b3IgIT09ICdmdW5jdGlvbicgPyAnJyA6IG9iai5jb25zdHJ1Y3Rvci5uYW1lID8gb2JqLmNvbnN0cnVjdG9yLm5hbWUgKyAnICcgOiAnJzsKICAgIHZhciB0YWcgPSBjb25zdHJ1Y3RvclRhZyArIChzdHJpbmdUYWcgfHwgcHJvdG9UYWcgPyAnWycgKyAkam9pbi5jYWxsKCRjb25jYXQuY2FsbChbXSwgc3RyaW5nVGFnIHx8IFtdLCBwcm90b1RhZyB8fCBbXSksICc6ICcpICsgJ10gJyA6ICcnKTsKICAgIGlmICh5cy5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIHRhZyArICd7fSc7CiAgICB9CiAgICBpZiAoaW5kZW50KSB7CiAgICAgIHJldHVybiB0YWcgKyAneycgKyBpbmRlbnRlZEpvaW4oeXMsIGluZGVudCkgKyAnfSc7CiAgICB9CiAgICByZXR1cm4gdGFnICsgJ3sgJyArICRqb2luLmNhbGwoeXMsICcsICcpICsgJyB9JzsKICB9CiAgcmV0dXJuIFN0cmluZyhvYmopOwp9OwpmdW5jdGlvbiB3cmFwUXVvdGVzKHMsIGRlZmF1bHRTdHlsZSwgb3B0cykgewogIHZhciBxdW90ZUNoYXIgPSAob3B0cy5xdW90ZVN0eWxlIHx8IGRlZmF1bHRTdHlsZSkgPT09ICdkb3VibGUnID8gJyInIDogIiciOwogIHJldHVybiBxdW90ZUNoYXIgKyBzICsgcXVvdGVDaGFyOwp9CmZ1bmN0aW9uIHF1b3RlKHMpIHsKICByZXR1cm4gJHJlcGxhY2UuY2FsbChTdHJpbmcocyksIC8iL2csICcmcXVvdDsnKTsKfQpmdW5jdGlvbiBpc0FycmF5KG9iaikgewogIHJldHVybiB0b1N0cihvYmopID09PSAnW29iamVjdCBBcnJheV0nICYmICghdG9TdHJpbmdUYWcgfHwgISh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiB0b1N0cmluZ1RhZyBpbiBvYmopKTsKfQpmdW5jdGlvbiBpc0RhdGUob2JqKSB7CiAgcmV0dXJuIHRvU3RyKG9iaikgPT09ICdbb2JqZWN0IERhdGVdJyAmJiAoIXRvU3RyaW5nVGFnIHx8ICEodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgdG9TdHJpbmdUYWcgaW4gb2JqKSk7Cn0KZnVuY3Rpb24gaXNSZWdFeHAob2JqKSB7CiAgcmV0dXJuIHRvU3RyKG9iaikgPT09ICdbb2JqZWN0IFJlZ0V4cF0nICYmICghdG9TdHJpbmdUYWcgfHwgISh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiB0b1N0cmluZ1RhZyBpbiBvYmopKTsKfQpmdW5jdGlvbiBpc0Vycm9yKG9iaikgewogIHJldHVybiB0b1N0cihvYmopID09PSAnW29iamVjdCBFcnJvcl0nICYmICghdG9TdHJpbmdUYWcgfHwgISh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiB0b1N0cmluZ1RhZyBpbiBvYmopKTsKfQpmdW5jdGlvbiBpc1N0cmluZyhvYmopIHsKICByZXR1cm4gdG9TdHIob2JqKSA9PT0gJ1tvYmplY3QgU3RyaW5nXScgJiYgKCF0b1N0cmluZ1RhZyB8fCAhKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHRvU3RyaW5nVGFnIGluIG9iaikpOwp9CmZ1bmN0aW9uIGlzTnVtYmVyKG9iaikgewogIHJldHVybiB0b1N0cihvYmopID09PSAnW29iamVjdCBOdW1iZXJdJyAmJiAoIXRvU3RyaW5nVGFnIHx8ICEodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgdG9TdHJpbmdUYWcgaW4gb2JqKSk7Cn0KZnVuY3Rpb24gaXNCb29sZWFuKG9iaikgewogIHJldHVybiB0b1N0cihvYmopID09PSAnW29iamVjdCBCb29sZWFuXScgJiYgKCF0b1N0cmluZ1RhZyB8fCAhKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHRvU3RyaW5nVGFnIGluIG9iaikpOwp9CgovLyBTeW1ib2wgYW5kIEJpZ0ludCBkbyBoYXZlIFN5bWJvbC50b1N0cmluZ1RhZyBieSBzcGVjLCBzbyB0aGF0IGNhbid0IGJlIHVzZWQgdG8gZWxpbWluYXRlIGZhbHNlIHBvc2l0aXZlcwpmdW5jdGlvbiBpc1N5bWJvbChvYmopIHsKICBpZiAoaGFzU2hhbW1lZFN5bWJvbHMpIHsKICAgIHJldHVybiBvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgb2JqIGluc3RhbmNlb2YgU3ltYm9sOwogIH0KICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N5bWJvbCcpIHsKICAgIHJldHVybiB0cnVlOwogIH0KICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCAhc3ltVG9TdHJpbmcpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgdHJ5IHsKICAgIHN5bVRvU3RyaW5nLmNhbGwob2JqKTsKICAgIHJldHVybiB0cnVlOwogIH0gY2F0Y2ggKGUpIHt9CiAgcmV0dXJuIGZhbHNlOwp9CmZ1bmN0aW9uIGlzQmlnSW50KG9iaikgewogIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8ICFiaWdJbnRWYWx1ZU9mKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHRyeSB7CiAgICBiaWdJbnRWYWx1ZU9mLmNhbGwob2JqKTsKICAgIHJldHVybiB0cnVlOwogIH0gY2F0Y2ggKGUpIHt9CiAgcmV0dXJuIGZhbHNlOwp9CnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5IHx8IGZ1bmN0aW9uIChrZXkpIHsKICByZXR1cm4ga2V5IGluIHRoaXM7Cn07CmZ1bmN0aW9uIGhhcyhvYmosIGtleSkgewogIHJldHVybiBoYXNPd24uY2FsbChvYmosIGtleSk7Cn0KZnVuY3Rpb24gdG9TdHIob2JqKSB7CiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nLmNhbGwob2JqKTsKfQpmdW5jdGlvbiBuYW1lT2YoZikgewogIGlmIChmLm5hbWUpIHsKICAgIHJldHVybiBmLm5hbWU7CiAgfQogIHZhciBtID0gJG1hdGNoLmNhbGwoZnVuY3Rpb25Ub1N0cmluZy5jYWxsKGYpLCAvXmZ1bmN0aW9uXHMqKFtcdyRdKykvKTsKICBpZiAobSkgewogICAgcmV0dXJuIG1bMV07CiAgfQogIHJldHVybiBudWxsOwp9CmZ1bmN0aW9uIGluZGV4T2YoeHMsIHgpIHsKICBpZiAoeHMuaW5kZXhPZikgewogICAgcmV0dXJuIHhzLmluZGV4T2YoeCk7CiAgfQogIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICBpZiAoeHNbaV0gPT09IHgpIHsKICAgICAgcmV0dXJuIGk7CiAgICB9CiAgfQogIHJldHVybiAtMTsKfQpmdW5jdGlvbiBpc01hcCh4KSB7CiAgaWYgKCFtYXBTaXplIHx8ICF4IHx8IHR5cGVvZiB4ICE9PSAnb2JqZWN0JykgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB0cnkgewogICAgbWFwU2l6ZS5jYWxsKHgpOwogICAgdHJ5IHsKICAgICAgc2V0U2l6ZS5jYWxsKHgpOwogICAgfSBjYXRjaCAocykgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiB4IGluc3RhbmNlb2YgTWFwOyAvLyBjb3JlLWpzIHdvcmthcm91bmQsIHByZS12Mi41LjAKICB9IGNhdGNoIChlKSB7fQogIHJldHVybiBmYWxzZTsKfQpmdW5jdGlvbiBpc1dlYWtNYXAoeCkgewogIGlmICghd2Vha01hcEhhcyB8fCAheCB8fCB0eXBlb2YgeCAhPT0gJ29iamVjdCcpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgdHJ5IHsKICAgIHdlYWtNYXBIYXMuY2FsbCh4LCB3ZWFrTWFwSGFzKTsKICAgIHRyeSB7CiAgICAgIHdlYWtTZXRIYXMuY2FsbCh4LCB3ZWFrU2V0SGFzKTsKICAgIH0gY2F0Y2ggKHMpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICByZXR1cm4geCBpbnN0YW5jZW9mIFdlYWtNYXA7IC8vIGNvcmUtanMgd29ya2Fyb3VuZCwgcHJlLXYyLjUuMAogIH0gY2F0Y2ggKGUpIHt9CiAgcmV0dXJuIGZhbHNlOwp9CmZ1bmN0aW9uIGlzV2Vha1JlZih4KSB7CiAgaWYgKCF3ZWFrUmVmRGVyZWYgfHwgIXggfHwgdHlwZW9mIHggIT09ICdvYmplY3QnKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHRyeSB7CiAgICB3ZWFrUmVmRGVyZWYuY2FsbCh4KTsKICAgIHJldHVybiB0cnVlOwogIH0gY2F0Y2ggKGUpIHt9CiAgcmV0dXJuIGZhbHNlOwp9CmZ1bmN0aW9uIGlzU2V0KHgpIHsKICBpZiAoIXNldFNpemUgfHwgIXggfHwgdHlwZW9mIHggIT09ICdvYmplY3QnKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHRyeSB7CiAgICBzZXRTaXplLmNhbGwoeCk7CiAgICB0cnkgewogICAgICBtYXBTaXplLmNhbGwoeCk7CiAgICB9IGNhdGNoIChtKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIHggaW5zdGFuY2VvZiBTZXQ7IC8vIGNvcmUtanMgd29ya2Fyb3VuZCwgcHJlLXYyLjUuMAogIH0gY2F0Y2ggKGUpIHt9CiAgcmV0dXJuIGZhbHNlOwp9CmZ1bmN0aW9uIGlzV2Vha1NldCh4KSB7CiAgaWYgKCF3ZWFrU2V0SGFzIHx8ICF4IHx8IHR5cGVvZiB4ICE9PSAnb2JqZWN0JykgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB0cnkgewogICAgd2Vha1NldEhhcy5jYWxsKHgsIHdlYWtTZXRIYXMpOwogICAgdHJ5IHsKICAgICAgd2Vha01hcEhhcy5jYWxsKHgsIHdlYWtNYXBIYXMpOwogICAgfSBjYXRjaCAocykgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiB4IGluc3RhbmNlb2YgV2Vha1NldDsgLy8gY29yZS1qcyB3b3JrYXJvdW5kLCBwcmUtdjIuNS4wCiAgfSBjYXRjaCAoZSkge30KICByZXR1cm4gZmFsc2U7Cn0KZnVuY3Rpb24gaXNFbGVtZW50KHgpIHsKICBpZiAoIXggfHwgdHlwZW9mIHggIT09ICdvYmplY3QnKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGlmICh0eXBlb2YgSFRNTEVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHggaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkgewogICAgcmV0dXJuIHRydWU7CiAgfQogIHJldHVybiB0eXBlb2YgeC5ub2RlTmFtZSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHguZ2V0QXR0cmlidXRlID09PSAnZnVuY3Rpb24nOwp9CmZ1bmN0aW9uIGluc3BlY3RTdHJpbmcoc3RyLCBvcHRzKSB7CiAgaWYgKHN0ci5sZW5ndGggPiBvcHRzLm1heFN0cmluZ0xlbmd0aCkgewogICAgdmFyIHJlbWFpbmluZyA9IHN0ci5sZW5ndGggLSBvcHRzLm1heFN0cmluZ0xlbmd0aDsKICAgIHZhciB0cmFpbGVyID0gJy4uLiAnICsgcmVtYWluaW5nICsgJyBtb3JlIGNoYXJhY3RlcicgKyAocmVtYWluaW5nID4gMSA/ICdzJyA6ICcnKTsKICAgIHJldHVybiBpbnNwZWN0U3RyaW5nKCRzbGljZS5jYWxsKHN0ciwgMCwgb3B0cy5tYXhTdHJpbmdMZW5ndGgpLCBvcHRzKSArIHRyYWlsZXI7CiAgfQogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4CiAgdmFyIHMgPSAkcmVwbGFjZS5jYWxsKCRyZXBsYWNlLmNhbGwoc3RyLCAvKFsnXFxdKS9nLCAnXFwkMScpLCAvW1x4MDAtXHgxZl0vZywgbG93Ynl0ZSk7CiAgcmV0dXJuIHdyYXBRdW90ZXMocywgJ3NpbmdsZScsIG9wdHMpOwp9CmZ1bmN0aW9uIGxvd2J5dGUoYykgewogIHZhciBuID0gYy5jaGFyQ29kZUF0KDApOwogIHZhciB4ID0gewogICAgODogJ2InLAogICAgOTogJ3QnLAogICAgMTA6ICduJywKICAgIDEyOiAnZicsCiAgICAxMzogJ3InCiAgfVtuXTsKICBpZiAoeCkgewogICAgcmV0dXJuICdcXCcgKyB4OwogIH0KICByZXR1cm4gJ1xceCcgKyAobiA8IDB4MTAgPyAnMCcgOiAnJykgKyAkdG9VcHBlckNhc2UuY2FsbChuLnRvU3RyaW5nKDE2KSk7Cn0KZnVuY3Rpb24gbWFya0JveGVkKHN0cikgewogIHJldHVybiAnT2JqZWN0KCcgKyBzdHIgKyAnKSc7Cn0KZnVuY3Rpb24gd2Vha0NvbGxlY3Rpb25PZih0eXBlKSB7CiAgcmV0dXJuIHR5cGUgKyAnIHsgPyB9JzsKfQpmdW5jdGlvbiBjb2xsZWN0aW9uT2YodHlwZSwgc2l6ZSwgZW50cmllcywgaW5kZW50KSB7CiAgdmFyIGpvaW5lZEVudHJpZXMgPSBpbmRlbnQgPyBpbmRlbnRlZEpvaW4oZW50cmllcywgaW5kZW50KSA6ICRqb2luLmNhbGwoZW50cmllcywgJywgJyk7CiAgcmV0dXJuIHR5cGUgKyAnICgnICsgc2l6ZSArICcpIHsnICsgam9pbmVkRW50cmllcyArICd9JzsKfQpmdW5jdGlvbiBzaW5nbGVMaW5lVmFsdWVzKHhzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykgewogICAgaWYgKGluZGV4T2YoeHNbaV0sICdcbicpID49IDApIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KICByZXR1cm4gdHJ1ZTsKfQpmdW5jdGlvbiBnZXRJbmRlbnQob3B0cywgZGVwdGgpIHsKICB2YXIgYmFzZUluZGVudDsKICBpZiAob3B0cy5pbmRlbnQgPT09ICdcdCcpIHsKICAgIGJhc2VJbmRlbnQgPSAnXHQnOwogIH0gZWxzZSBpZiAodHlwZW9mIG9wdHMuaW5kZW50ID09PSAnbnVtYmVyJyAmJiBvcHRzLmluZGVudCA+IDApIHsKICAgIGJhc2VJbmRlbnQgPSAkam9pbi5jYWxsKEFycmF5KG9wdHMuaW5kZW50ICsgMSksICcgJyk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBudWxsOwogIH0KICByZXR1cm4gewogICAgYmFzZTogYmFzZUluZGVudCwKICAgIHByZXY6ICRqb2luLmNhbGwoQXJyYXkoZGVwdGggKyAxKSwgYmFzZUluZGVudCkKICB9Owp9CmZ1bmN0aW9uIGluZGVudGVkSm9pbih4cywgaW5kZW50KSB7CiAgaWYgKHhzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuICcnOwogIH0KICB2YXIgbGluZUpvaW5lciA9ICdcbicgKyBpbmRlbnQucHJldiArIGluZGVudC5iYXNlOwogIHJldHVybiBsaW5lSm9pbmVyICsgJGpvaW4uY2FsbCh4cywgJywnICsgbGluZUpvaW5lcikgKyAnXG4nICsgaW5kZW50LnByZXY7Cn0KZnVuY3Rpb24gYXJyT2JqS2V5cyhvYmosIGluc3BlY3QpIHsKICB2YXIgaXNBcnIgPSBpc0FycmF5KG9iaik7CiAgdmFyIHhzID0gW107CiAgaWYgKGlzQXJyKSB7CiAgICB4cy5sZW5ndGggPSBvYmoubGVuZ3RoOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHsKICAgICAgeHNbaV0gPSBoYXMob2JqLCBpKSA/IGluc3BlY3Qob2JqW2ldLCBvYmopIDogJyc7CiAgICB9CiAgfQogIHZhciBzeW1zID0gdHlwZW9mIGdPUFMgPT09ICdmdW5jdGlvbicgPyBnT1BTKG9iaikgOiBbXTsKICB2YXIgc3ltTWFwOwogIGlmIChoYXNTaGFtbWVkU3ltYm9scykgewogICAgc3ltTWFwID0ge307CiAgICBmb3IgKHZhciBrID0gMDsgayA8IHN5bXMubGVuZ3RoOyBrKyspIHsKICAgICAgc3ltTWFwWyckJyArIHN5bXNba11dID0gc3ltc1trXTsKICAgIH0KICB9CiAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheAogICAgaWYgKCFoYXMob2JqLCBrZXkpKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4LCBuby1jb250aW51ZQogICAgaWYgKGlzQXJyICYmIFN0cmluZyhOdW1iZXIoa2V5KSkgPT09IGtleSAmJiBrZXkgPCBvYmoubGVuZ3RoKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4LCBuby1jb250aW51ZQogICAgaWYgKGhhc1NoYW1tZWRTeW1ib2xzICYmIHN5bU1hcFsnJCcgKyBrZXldIGluc3RhbmNlb2YgU3ltYm9sKSB7CiAgICAgIC8vIHRoaXMgaXMgdG8gcHJldmVudCBzaGFtbWVkIFN5bWJvbHMsIHdoaWNoIGFyZSBzdG9yZWQgYXMgc3RyaW5ncywgZnJvbSBiZWluZyBpbmNsdWRlZCBpbiB0aGUgc3RyaW5nIGtleSBzZWN0aW9uCiAgICAgIGNvbnRpbnVlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4LCBuby1jb250aW51ZQogICAgfSBlbHNlIGlmICgkdGVzdC5jYWxsKC9bXlx3JF0vLCBrZXkpKSB7CiAgICAgIHhzLnB1c2goaW5zcGVjdChrZXksIG9iaikgKyAnOiAnICsgaW5zcGVjdChvYmpba2V5XSwgb2JqKSk7CiAgICB9IGVsc2UgewogICAgICB4cy5wdXNoKGtleSArICc6ICcgKyBpbnNwZWN0KG9ialtrZXldLCBvYmopKTsKICAgIH0KICB9CiAgaWYgKHR5cGVvZiBnT1BTID09PSAnZnVuY3Rpb24nKSB7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN5bXMubGVuZ3RoOyBqKyspIHsKICAgICAgaWYgKGlzRW51bWVyYWJsZS5jYWxsKG9iaiwgc3ltc1tqXSkpIHsKICAgICAgICB4cy5wdXNoKCdbJyArIGluc3BlY3Qoc3ltc1tqXSkgKyAnXTogJyArIGluc3BlY3Qob2JqW3N5bXNbal1dLCBvYmopKTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4geHM7Cn0="},null]}