{"remainingRequest":"/Users/adamliu/vant/node_modules/babel-loader/lib/index.js!/Users/adamliu/vant/src/field/index.js","dependencies":[{"path":"/Users/adamliu/vant/src/field/index.js","mtime":1694509704945},{"path":"/Users/adamliu/vant/babel.config.js","mtime":1694509704583},{"path":"/Users/adamliu/vant/node_modules/cache-loader/dist/cjs.js","mtime":1694509793427},{"path":"/Users/adamliu/vant/node_modules/babel-loader/lib/index.js","mtime":1694509794381}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9tZXJnZUpTWFByb3BzMiBmcm9tICJAdnVlL2JhYmVsLWhlbHBlci12dWUtanN4LW1lcmdlLXByb3BzIjsKaW1wb3J0IF9tZXJnZUpTWFByb3BzIGZyb20gIkB2dWUvYmFiZWwtaGVscGVyLXZ1ZS1qc3gtbWVyZ2UtcHJvcHMiOwppbXBvcnQgX2V4dGVuZHMgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kcyI7Ci8vIFV0aWxzCmltcG9ydCB7IHJlc2V0U2Nyb2xsIH0gZnJvbSAnLi4vdXRpbHMvZG9tL3Jlc2V0LXNjcm9sbCc7CmltcG9ydCB7IGZvcm1hdE51bWJlciB9IGZyb20gJy4uL3V0aWxzL2Zvcm1hdC9udW1iZXInOwppbXBvcnQgeyBwcmV2ZW50RGVmYXVsdCB9IGZyb20gJy4uL3V0aWxzL2RvbS9ldmVudCc7CmltcG9ydCB7IGdldFJvb3RTY3JvbGxUb3AsIHNldFJvb3RTY3JvbGxUb3AgfSBmcm9tICcuLi91dGlscy9kb20vc2Nyb2xsJzsKaW1wb3J0IHsgaXNEZWYsIGFkZFVuaXQsIGlzT2JqZWN0LCBpc1Byb21pc2UsIGlzRnVuY3Rpb24sIGNyZWF0ZU5hbWVzcGFjZSB9IGZyb20gJy4uL3V0aWxzJzsKCi8vIENvbXBvbmVudHMKaW1wb3J0IEljb24gZnJvbSAnLi4vaWNvbic7CmltcG9ydCBDZWxsIGZyb20gJy4uL2NlbGwnOwppbXBvcnQgeyBjZWxsUHJvcHMgfSBmcm9tICcuLi9jZWxsL3NoYXJlZCc7CnZhciBfY3JlYXRlTmFtZXNwYWNlID0gY3JlYXRlTmFtZXNwYWNlKCdmaWVsZCcpLAogIGNyZWF0ZUNvbXBvbmVudCA9IF9jcmVhdGVOYW1lc3BhY2VbMF0sCiAgYmVtID0gX2NyZWF0ZU5hbWVzcGFjZVsxXTsKZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHsKICBpbmhlcml0QXR0cnM6IGZhbHNlLAogIHByb3ZpZGU6IGZ1bmN0aW9uIHByb3ZpZGUoKSB7CiAgICByZXR1cm4gewogICAgICB2YW5GaWVsZDogdGhpcwogICAgfTsKICB9LAogIGluamVjdDogewogICAgdmFuRm9ybTogewogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBwcm9wczogX2V4dGVuZHMoe30sIGNlbGxQcm9wcywgewogICAgbmFtZTogU3RyaW5nLAogICAgcnVsZXM6IEFycmF5LAogICAgZGlzYWJsZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHJlYWRvbmx5OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBhdXRvc2l6ZTogW0Jvb2xlYW4sIE9iamVjdF0sCiAgICBsZWZ0SWNvbjogU3RyaW5nLAogICAgcmlnaHRJY29uOiBTdHJpbmcsCiAgICBjbGVhcmFibGU6IEJvb2xlYW4sCiAgICBmb3JtYXR0ZXI6IEZ1bmN0aW9uLAogICAgbWF4bGVuZ3RoOiBbTnVtYmVyLCBTdHJpbmddLAogICAgbGFiZWxXaWR0aDogW051bWJlciwgU3RyaW5nXSwKICAgIGxhYmVsQ2xhc3M6IG51bGwsCiAgICBsYWJlbEFsaWduOiBTdHJpbmcsCiAgICBpbnB1dEFsaWduOiBTdHJpbmcsCiAgICBwbGFjZWhvbGRlcjogU3RyaW5nLAogICAgZXJyb3JNZXNzYWdlOiBTdHJpbmcsCiAgICBlcnJvck1lc3NhZ2VBbGlnbjogU3RyaW5nLAogICAgc2hvd1dvcmRMaW1pdDogQm9vbGVhbiwKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgdHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICd0ZXh0JwogICAgfSwKICAgIGVycm9yOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBjb2xvbjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgY2xlYXJUcmlnZ2VyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2ZvY3VzJwogICAgfSwKICAgIGZvcm1hdFRyaWdnZXI6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnb25DaGFuZ2UnCiAgICB9CiAgfSksCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvY3VzZWQ6IGZhbHNlLAogICAgICB2YWxpZGF0ZUZhaWxlZDogZmFsc2UsCiAgICAgIHZhbGlkYXRlTWVzc2FnZTogJycKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKCkgewogICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMudmFsdWUpOwogICAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpOwogICAgICB0aGlzLnZhbGlkYXRlV2l0aFRyaWdnZXIoJ29uQ2hhbmdlJyk7CiAgICAgIHRoaXMuJG5leHRUaWNrKHRoaXMuYWRqdXN0U2l6ZSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy51cGRhdGVWYWx1ZSh0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdFRyaWdnZXIpOwogICAgdGhpcy4kbmV4dFRpY2sodGhpcy5hZGp1c3RTaXplKTsKICAgIGlmICh0aGlzLnZhbkZvcm0pIHsKICAgICAgdGhpcy52YW5Gb3JtLmFkZEZpZWxkKHRoaXMpOwogICAgfQogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGlmICh0aGlzLnZhbkZvcm0pIHsKICAgICAgdGhpcy52YW5Gb3JtLnJlbW92ZUZpZWxkKHRoaXMpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNob3dDbGVhcjogZnVuY3Rpb24gc2hvd0NsZWFyKCkgewogICAgICB2YXIgcmVhZG9ubHkgPSB0aGlzLmdldFByb3AoJ3JlYWRvbmx5Jyk7CiAgICAgIGlmICh0aGlzLmNsZWFyYWJsZSAmJiAhcmVhZG9ubHkpIHsKICAgICAgICB2YXIgaGFzVmFsdWUgPSBpc0RlZih0aGlzLnZhbHVlKSAmJiB0aGlzLnZhbHVlICE9PSAnJzsKICAgICAgICB2YXIgdHJpZ2dlciA9IHRoaXMuY2xlYXJUcmlnZ2VyID09PSAnYWx3YXlzJyB8fCB0aGlzLmNsZWFyVHJpZ2dlciA9PT0gJ2ZvY3VzJyAmJiB0aGlzLmZvY3VzZWQ7CiAgICAgICAgcmV0dXJuIGhhc1ZhbHVlICYmIHRyaWdnZXI7CiAgICAgIH0KICAgIH0sCiAgICBzaG93RXJyb3I6IGZ1bmN0aW9uIHNob3dFcnJvcigpIHsKICAgICAgaWYgKHRoaXMuZXJyb3IgIT09IG51bGwpIHsKICAgICAgICByZXR1cm4gdGhpcy5lcnJvcjsKICAgICAgfQogICAgICBpZiAodGhpcy52YW5Gb3JtICYmIHRoaXMudmFuRm9ybS5zaG93RXJyb3IgJiYgdGhpcy52YWxpZGF0ZUZhaWxlZCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9LAogICAgbGlzdGVuZXJzOiBmdW5jdGlvbiBsaXN0ZW5lcnMoKSB7CiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgdGhpcy4kbGlzdGVuZXJzLCB7CiAgICAgICAgYmx1cjogdGhpcy5vbkJsdXIsCiAgICAgICAgZm9jdXM6IHRoaXMub25Gb2N1cywKICAgICAgICBpbnB1dDogdGhpcy5vbklucHV0LAogICAgICAgIGNsaWNrOiB0aGlzLm9uQ2xpY2tJbnB1dCwKICAgICAgICBrZXlwcmVzczogdGhpcy5vbktleXByZXNzCiAgICAgIH0pOwogICAgfSwKICAgIGxhYmVsU3R5bGU6IGZ1bmN0aW9uIGxhYmVsU3R5bGUoKSB7CiAgICAgIHZhciBsYWJlbFdpZHRoID0gdGhpcy5nZXRQcm9wKCdsYWJlbFdpZHRoJyk7CiAgICAgIGlmIChsYWJlbFdpZHRoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHdpZHRoOiBhZGRVbml0KGxhYmVsV2lkdGgpCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIGZvcm1WYWx1ZTogZnVuY3Rpb24gZm9ybVZhbHVlKCkgewogICAgICBpZiAodGhpcy5jaGlsZHJlbiAmJiAodGhpcy4kc2NvcGVkU2xvdHMuaW5wdXQgfHwgdGhpcy4kc2xvdHMuaW5wdXQpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4udmFsdWU7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMudmFsdWU7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBAZXhwb3NlZC1hcGkKICAgIGZvY3VzOiBmdW5jdGlvbiBmb2N1cygpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuaW5wdXQpIHsKICAgICAgICB0aGlzLiRyZWZzLmlucHV0LmZvY3VzKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyBAZXhwb3NlZC1hcGkKICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLmlucHV0KSB7CiAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC5ibHVyKCk7CiAgICAgIH0KICAgIH0sCiAgICBydW5WYWxpZGF0b3I6IGZ1bmN0aW9uIHJ1blZhbGlkYXRvcih2YWx1ZSwgcnVsZSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB2YXIgcmV0dXJuVmFsID0gcnVsZS52YWxpZGF0b3IodmFsdWUsIHJ1bGUpOwogICAgICAgIGlmIChpc1Byb21pc2UocmV0dXJuVmFsKSkgewogICAgICAgICAgcmV0dXJuIHJldHVyblZhbC50aGVuKHJlc29sdmUpOwogICAgICAgIH0KICAgICAgICByZXNvbHZlKHJldHVyblZhbCk7CiAgICAgIH0pOwogICAgfSwKICAgIGlzRW1wdHlWYWx1ZTogZnVuY3Rpb24gaXNFbXB0eVZhbHVlKHZhbHVlKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICAgIHJldHVybiAhdmFsdWUubGVuZ3RoOwogICAgICB9CiAgICAgIGlmICh2YWx1ZSA9PT0gMCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gIXZhbHVlOwogICAgfSwKICAgIHJ1blN5bmNSdWxlOiBmdW5jdGlvbiBydW5TeW5jUnVsZSh2YWx1ZSwgcnVsZSkgewogICAgICBpZiAocnVsZS5yZXF1aXJlZCAmJiB0aGlzLmlzRW1wdHlWYWx1ZSh2YWx1ZSkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHJ1bGUucGF0dGVybiAmJiAhcnVsZS5wYXR0ZXJuLnRlc3QodmFsdWUpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGdldFJ1bGVNZXNzYWdlOiBmdW5jdGlvbiBnZXRSdWxlTWVzc2FnZSh2YWx1ZSwgcnVsZSkgewogICAgICB2YXIgbWVzc2FnZSA9IHJ1bGUubWVzc2FnZTsKICAgICAgaWYgKGlzRnVuY3Rpb24obWVzc2FnZSkpIHsKICAgICAgICByZXR1cm4gbWVzc2FnZSh2YWx1ZSwgcnVsZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICB9LAogICAgcnVuUnVsZXM6IGZ1bmN0aW9uIHJ1blJ1bGVzKHJ1bGVzKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBydWxlcy5yZWR1Y2UoZnVuY3Rpb24gKHByb21pc2UsIHJ1bGUpIHsKICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChfdGhpcy52YWxpZGF0ZUZhaWxlZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgdmFsdWUgPSBfdGhpcy5mb3JtVmFsdWU7CiAgICAgICAgICBpZiAocnVsZS5mb3JtYXR0ZXIpIHsKICAgICAgICAgICAgdmFsdWUgPSBydWxlLmZvcm1hdHRlcih2YWx1ZSwgcnVsZSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIV90aGlzLnJ1blN5bmNSdWxlKHZhbHVlLCBydWxlKSkgewogICAgICAgICAgICBfdGhpcy52YWxpZGF0ZUZhaWxlZCA9IHRydWU7CiAgICAgICAgICAgIF90aGlzLnZhbGlkYXRlTWVzc2FnZSA9IF90aGlzLmdldFJ1bGVNZXNzYWdlKHZhbHVlLCBydWxlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHJ1bGUudmFsaWRhdG9yKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5ydW5WYWxpZGF0b3IodmFsdWUsIHJ1bGUpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICBfdGhpcy52YWxpZGF0ZUZhaWxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBfdGhpcy52YWxpZGF0ZU1lc3NhZ2UgPSBfdGhpcy5nZXRSdWxlTWVzc2FnZSh2YWx1ZSwgcnVsZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwgUHJvbWlzZS5yZXNvbHZlKCkpOwogICAgfSwKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShydWxlcykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgaWYgKHJ1bGVzID09PSB2b2lkIDApIHsKICAgICAgICBydWxlcyA9IHRoaXMucnVsZXM7CiAgICAgIH0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgaWYgKCFydWxlcykgewogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0KICAgICAgICBfdGhpczIucmVzZXRWYWxpZGF0aW9uKCk7CiAgICAgICAgX3RoaXMyLnJ1blJ1bGVzKHJ1bGVzKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChfdGhpczIudmFsaWRhdGVGYWlsZWQpIHsKICAgICAgICAgICAgcmVzb2x2ZSh7CiAgICAgICAgICAgICAgbmFtZTogX3RoaXMyLm5hbWUsCiAgICAgICAgICAgICAgbWVzc2FnZTogX3RoaXMyLnZhbGlkYXRlTWVzc2FnZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgdmFsaWRhdGVXaXRoVHJpZ2dlcjogZnVuY3Rpb24gdmFsaWRhdGVXaXRoVHJpZ2dlcih0cmlnZ2VyKSB7CiAgICAgIGlmICh0aGlzLnZhbkZvcm0gJiYgdGhpcy5ydWxlcykgewogICAgICAgIHZhciBkZWZhdWx0VHJpZ2dlciA9IHRoaXMudmFuRm9ybS52YWxpZGF0ZVRyaWdnZXIgPT09IHRyaWdnZXI7CiAgICAgICAgdmFyIHJ1bGVzID0gdGhpcy5ydWxlcy5maWx0ZXIoZnVuY3Rpb24gKHJ1bGUpIHsKICAgICAgICAgIGlmIChydWxlLnRyaWdnZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHJ1bGUudHJpZ2dlciA9PT0gdHJpZ2dlcjsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBkZWZhdWx0VHJpZ2dlcjsKICAgICAgICB9KTsKICAgICAgICBpZiAocnVsZXMubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLnZhbGlkYXRlKHJ1bGVzKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICByZXNldFZhbGlkYXRpb246IGZ1bmN0aW9uIHJlc2V0VmFsaWRhdGlvbigpIHsKICAgICAgaWYgKHRoaXMudmFsaWRhdGVGYWlsZWQpIHsKICAgICAgICB0aGlzLnZhbGlkYXRlRmFpbGVkID0gZmFsc2U7CiAgICAgICAgdGhpcy52YWxpZGF0ZU1lc3NhZ2UgPSAnJzsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZVZhbHVlOiBmdW5jdGlvbiB1cGRhdGVWYWx1ZSh2YWx1ZSwgdHJpZ2dlcikgewogICAgICBpZiAodHJpZ2dlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgdHJpZ2dlciA9ICdvbkNoYW5nZSc7CiAgICAgIH0KICAgICAgdmFsdWUgPSBpc0RlZih2YWx1ZSkgPyBTdHJpbmcodmFsdWUpIDogJyc7CgogICAgICAvLyBuYXRpdmUgbWF4bGVuZ3RoIGhhdmUgaW5jb3JyZWN0IGxpbmUtYnJlYWsgY291bnRpbmcKICAgICAgLy8gc2VlOiBodHRwczovL2dpdGh1Yi5jb20vdmFudC11aS92YW50L2lzc3Vlcy81MDMzCiAgICAgIHZhciBtYXhsZW5ndGggPSB0aGlzLm1heGxlbmd0aDsKICAgICAgaWYgKGlzRGVmKG1heGxlbmd0aCkgJiYgdmFsdWUubGVuZ3RoID4gbWF4bGVuZ3RoKSB7CiAgICAgICAgaWYgKHRoaXMudmFsdWUgJiYgdGhpcy52YWx1ZS5sZW5ndGggPT09ICttYXhsZW5ndGgpIHsKICAgICAgICAgIHZhbHVlID0gdGhpcy52YWx1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCBtYXhsZW5ndGgpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy50eXBlID09PSAnbnVtYmVyJyB8fCB0aGlzLnR5cGUgPT09ICdkaWdpdCcpIHsKICAgICAgICB2YXIgaXNOdW1iZXIgPSB0aGlzLnR5cGUgPT09ICdudW1iZXInOwogICAgICAgIHZhbHVlID0gZm9ybWF0TnVtYmVyKHZhbHVlLCBpc051bWJlciwgaXNOdW1iZXIpOwogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm1hdHRlciAmJiB0cmlnZ2VyID09PSB0aGlzLmZvcm1hdFRyaWdnZXIpIHsKICAgICAgICB2YWx1ZSA9IHRoaXMuZm9ybWF0dGVyKHZhbHVlKTsKICAgICAgfQogICAgICB2YXIgaW5wdXQgPSB0aGlzLiRyZWZzLmlucHV0OwogICAgICBpZiAoaW5wdXQgJiYgdmFsdWUgIT09IGlucHV0LnZhbHVlKSB7CiAgICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZTsKICAgICAgfQogICAgICBpZiAodmFsdWUgIT09IHRoaXMudmFsdWUpIHsKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHZhbHVlKTsKICAgICAgfQogICAgfSwKICAgIG9uSW5wdXQ6IGZ1bmN0aW9uIG9uSW5wdXQoZXZlbnQpIHsKICAgICAgLy8gbm90IHVwZGF0ZSB2LW1vZGVsIHdoZW4gY29tcG9zaW5nCiAgICAgIGlmIChldmVudC50YXJnZXQuY29tcG9zaW5nKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMudXBkYXRlVmFsdWUoZXZlbnQudGFyZ2V0LnZhbHVlKTsKICAgIH0sCiAgICBvbkZvY3VzOiBmdW5jdGlvbiBvbkZvY3VzKGV2ZW50KSB7CiAgICAgIHRoaXMuZm9jdXNlZCA9IHRydWU7CiAgICAgIHRoaXMuJGVtaXQoJ2ZvY3VzJywgZXZlbnQpOwogICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdmFudC11aS92YW50L2lzc3Vlcy85NzE1CiAgICAgIHRoaXMuJG5leHRUaWNrKHRoaXMuYWRqdXN0U2l6ZSk7CgogICAgICAvLyByZWFkb25seSBub3Qgd29yayBpbiBsZWdhY3kgbW9iaWxlIHNhZmFyaQogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKHRoaXMuZ2V0UHJvcCgncmVhZG9ubHknKSkgewogICAgICAgIHRoaXMuYmx1cigpOwogICAgICB9CiAgICB9LAogICAgb25CbHVyOiBmdW5jdGlvbiBvbkJsdXIoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMuZ2V0UHJvcCgncmVhZG9ubHknKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTsKICAgICAgdGhpcy51cGRhdGVWYWx1ZSh0aGlzLnZhbHVlLCAnb25CbHVyJyk7CiAgICAgIHRoaXMuJGVtaXQoJ2JsdXInLCBldmVudCk7CiAgICAgIHRoaXMudmFsaWRhdGVXaXRoVHJpZ2dlcignb25CbHVyJyk7CiAgICAgIHRoaXMuJG5leHRUaWNrKHRoaXMuYWRqdXN0U2l6ZSk7CiAgICAgIHJlc2V0U2Nyb2xsKCk7CiAgICB9LAogICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhldmVudCkgewogICAgICB0aGlzLiRlbWl0KCdjbGljaycsIGV2ZW50KTsKICAgIH0sCiAgICBvbkNsaWNrSW5wdXQ6IGZ1bmN0aW9uIG9uQ2xpY2tJbnB1dChldmVudCkgewogICAgICB0aGlzLiRlbWl0KCdjbGljay1pbnB1dCcsIGV2ZW50KTsKICAgIH0sCiAgICBvbkNsaWNrTGVmdEljb246IGZ1bmN0aW9uIG9uQ2xpY2tMZWZ0SWNvbihldmVudCkgewogICAgICB0aGlzLiRlbWl0KCdjbGljay1sZWZ0LWljb24nLCBldmVudCk7CiAgICB9LAogICAgb25DbGlja1JpZ2h0SWNvbjogZnVuY3Rpb24gb25DbGlja1JpZ2h0SWNvbihldmVudCkgewogICAgICB0aGlzLiRlbWl0KCdjbGljay1yaWdodC1pY29uJywgZXZlbnQpOwogICAgfSwKICAgIG9uQ2xlYXI6IGZ1bmN0aW9uIG9uQ2xlYXIoZXZlbnQpIHsKICAgICAgcHJldmVudERlZmF1bHQoZXZlbnQpOwogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsICcnKTsKICAgICAgdGhpcy4kZW1pdCgnY2xlYXInLCBldmVudCk7CiAgICB9LAogICAgb25LZXlwcmVzczogZnVuY3Rpb24gb25LZXlwcmVzcyhldmVudCkgewogICAgICB2YXIgRU5URVJfQ09ERSA9IDEzOwogICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gRU5URVJfQ09ERSkgewogICAgICAgIHZhciBzdWJtaXRPbkVudGVyID0gdGhpcy5nZXRQcm9wKCdzdWJtaXRPbkVudGVyJyk7CiAgICAgICAgaWYgKCFzdWJtaXRPbkVudGVyICYmIHRoaXMudHlwZSAhPT0gJ3RleHRhcmVhJykgewogICAgICAgICAgcHJldmVudERlZmF1bHQoZXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgLy8gdHJpZ2dlciBibHVyIGFmdGVyIGNsaWNrIGtleWJvYXJkIHNlYXJjaCBidXR0b24KICAgICAgICBpZiAodGhpcy50eXBlID09PSAnc2VhcmNoJykgewogICAgICAgICAgdGhpcy5ibHVyKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoJ2tleXByZXNzJywgZXZlbnQpOwogICAgfSwKICAgIGFkanVzdFNpemU6IGZ1bmN0aW9uIGFkanVzdFNpemUoKSB7CiAgICAgIHZhciBpbnB1dCA9IHRoaXMuJHJlZnMuaW5wdXQ7CiAgICAgIGlmICghKHRoaXMudHlwZSA9PT0gJ3RleHRhcmVhJyAmJiB0aGlzLmF1dG9zaXplKSB8fCAhaW5wdXQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIHNjcm9sbFRvcCA9IGdldFJvb3RTY3JvbGxUb3AoKTsKICAgICAgaW5wdXQuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nOwogICAgICB2YXIgaGVpZ2h0ID0gaW5wdXQuc2Nyb2xsSGVpZ2h0OwogICAgICBpZiAoaXNPYmplY3QodGhpcy5hdXRvc2l6ZSkpIHsKICAgICAgICB2YXIgX3RoaXMkYXV0b3NpemUgPSB0aGlzLmF1dG9zaXplLAogICAgICAgICAgbWF4SGVpZ2h0ID0gX3RoaXMkYXV0b3NpemUubWF4SGVpZ2h0LAogICAgICAgICAgbWluSGVpZ2h0ID0gX3RoaXMkYXV0b3NpemUubWluSGVpZ2h0OwogICAgICAgIGlmIChtYXhIZWlnaHQpIHsKICAgICAgICAgIGhlaWdodCA9IE1hdGgubWluKGhlaWdodCwgbWF4SGVpZ2h0KTsKICAgICAgICB9CiAgICAgICAgaWYgKG1pbkhlaWdodCkgewogICAgICAgICAgaGVpZ2h0ID0gTWF0aC5tYXgoaGVpZ2h0LCBtaW5IZWlnaHQpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoaGVpZ2h0KSB7CiAgICAgICAgaW5wdXQuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JzsKICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdmFudC11aS92YW50L2lzc3Vlcy85MTc4CiAgICAgICAgc2V0Um9vdFNjcm9sbFRvcChzY3JvbGxUb3ApOwogICAgICB9CiAgICB9LAogICAgZ2VuSW5wdXQ6IGZ1bmN0aW9uIGdlbklucHV0KCkgewogICAgICB2YXIgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQ7CiAgICAgIHZhciB0eXBlID0gdGhpcy50eXBlOwogICAgICB2YXIgZGlzYWJsZWQgPSB0aGlzLmdldFByb3AoJ2Rpc2FibGVkJyk7CiAgICAgIHZhciByZWFkb25seSA9IHRoaXMuZ2V0UHJvcCgncmVhZG9ubHknKTsKICAgICAgdmFyIGlucHV0U2xvdCA9IHRoaXMuc2xvdHMoJ2lucHV0Jyk7CiAgICAgIHZhciBpbnB1dEFsaWduID0gdGhpcy5nZXRQcm9wKCdpbnB1dEFsaWduJyk7CiAgICAgIGlmIChpbnB1dFNsb3QpIHsKICAgICAgICByZXR1cm4gaCgiZGl2IiwgewogICAgICAgICAgImNsYXNzIjogYmVtKCdjb250cm9sJywgW2lucHV0QWxpZ24sICdjdXN0b20nXSksCiAgICAgICAgICAib24iOiB7CiAgICAgICAgICAgICJjbGljayI6IHRoaXMub25DbGlja0lucHV0CiAgICAgICAgICB9CiAgICAgICAgfSwgW2lucHV0U2xvdF0pOwogICAgICB9CiAgICAgIHZhciBpbnB1dFByb3BzID0gewogICAgICAgIHJlZjogJ2lucHV0JywKICAgICAgICBjbGFzczogYmVtKCdjb250cm9sJywgaW5wdXRBbGlnbiksCiAgICAgICAgZG9tUHJvcHM6IHsKICAgICAgICAgIHZhbHVlOiB0aGlzLnZhbHVlCiAgICAgICAgfSwKICAgICAgICBhdHRyczogX2V4dGVuZHMoe30sIHRoaXMuJGF0dHJzLCB7CiAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgICByZWFkb25seTogcmVhZG9ubHksCiAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5wbGFjZWhvbGRlcgogICAgICAgIH0pLAogICAgICAgIG9uOiB0aGlzLmxpc3RlbmVycywKICAgICAgICAvLyBhZGQgbW9kZWwgZGlyZWN0aXZlIHRvIHNraXAgSU1FIGNvbXBvc2l0aW9uCiAgICAgICAgZGlyZWN0aXZlczogW3sKICAgICAgICAgIG5hbWU6ICdtb2RlbCcsCiAgICAgICAgICB2YWx1ZTogdGhpcy52YWx1ZQogICAgICAgIH1dCiAgICAgIH07CiAgICAgIGlmICh0eXBlID09PSAndGV4dGFyZWEnKSB7CiAgICAgICAgcmV0dXJuIGgoInRleHRhcmVhIiwgX21lcmdlSlNYUHJvcHMoW3t9LCBpbnB1dFByb3BzXSkpOwogICAgICB9CiAgICAgIHZhciBpbnB1dFR5cGUgPSB0eXBlOwogICAgICB2YXIgaW5wdXRNb2RlOwoKICAgICAgLy8gdHlwZT0ibnVtYmVyIiBpcyB3ZWlyZCBpbiBpT1MsIGFuZCBjYW4ndCBwcmV2ZW50IGRvdCBpbiBBbmRyb2lkCiAgICAgIC8vIHNvIHVzZSBpbnB1dG1vZGUgdG8gc2V0IGtleWJvYXJkIGluIG1vZGVybiBicm93c2VycwogICAgICBpZiAodHlwZSA9PT0gJ251bWJlcicpIHsKICAgICAgICBpbnB1dFR5cGUgPSAndGV4dCc7CiAgICAgICAgaW5wdXRNb2RlID0gJ2RlY2ltYWwnOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAnZGlnaXQnKSB7CiAgICAgICAgaW5wdXRUeXBlID0gJ3RlbCc7CiAgICAgICAgaW5wdXRNb2RlID0gJ251bWVyaWMnOwogICAgICB9CiAgICAgIHJldHVybiBoKCJpbnB1dCIsIF9tZXJnZUpTWFByb3BzMihbewogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJ0eXBlIjogaW5wdXRUeXBlLAogICAgICAgICAgImlucHV0bW9kZSI6IGlucHV0TW9kZQogICAgICAgIH0KICAgICAgfSwgaW5wdXRQcm9wc10pKTsKICAgIH0sCiAgICBnZW5MZWZ0SWNvbjogZnVuY3Rpb24gZ2VuTGVmdEljb24oKSB7CiAgICAgIHZhciBoID0gdGhpcy4kY3JlYXRlRWxlbWVudDsKICAgICAgdmFyIHNob3dMZWZ0SWNvbiA9IHRoaXMuc2xvdHMoJ2xlZnQtaWNvbicpIHx8IHRoaXMubGVmdEljb247CiAgICAgIGlmIChzaG93TGVmdEljb24pIHsKICAgICAgICByZXR1cm4gaCgiZGl2IiwgewogICAgICAgICAgImNsYXNzIjogYmVtKCdsZWZ0LWljb24nKSwKICAgICAgICAgICJvbiI6IHsKICAgICAgICAgICAgImNsaWNrIjogdGhpcy5vbkNsaWNrTGVmdEljb24KICAgICAgICAgIH0KICAgICAgICB9LCBbdGhpcy5zbG90cygnbGVmdC1pY29uJykgfHwgaChJY29uLCB7CiAgICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAgICJuYW1lIjogdGhpcy5sZWZ0SWNvbiwKICAgICAgICAgICAgImNsYXNzUHJlZml4IjogdGhpcy5pY29uUHJlZml4CiAgICAgICAgICB9CiAgICAgICAgfSldKTsKICAgICAgfQogICAgfSwKICAgIGdlblJpZ2h0SWNvbjogZnVuY3Rpb24gZ2VuUmlnaHRJY29uKCkgewogICAgICB2YXIgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQ7CiAgICAgIHZhciBzbG90cyA9IHRoaXMuc2xvdHM7CiAgICAgIHZhciBzaG93UmlnaHRJY29uID0gc2xvdHMoJ3JpZ2h0LWljb24nKSB8fCB0aGlzLnJpZ2h0SWNvbjsKICAgICAgaWYgKHNob3dSaWdodEljb24pIHsKICAgICAgICByZXR1cm4gaCgiZGl2IiwgewogICAgICAgICAgImNsYXNzIjogYmVtKCdyaWdodC1pY29uJyksCiAgICAgICAgICAib24iOiB7CiAgICAgICAgICAgICJjbGljayI6IHRoaXMub25DbGlja1JpZ2h0SWNvbgogICAgICAgICAgfQogICAgICAgIH0sIFtzbG90cygncmlnaHQtaWNvbicpIHx8IGgoSWNvbiwgewogICAgICAgICAgImF0dHJzIjogewogICAgICAgICAgICAibmFtZSI6IHRoaXMucmlnaHRJY29uLAogICAgICAgICAgICAiY2xhc3NQcmVmaXgiOiB0aGlzLmljb25QcmVmaXgKICAgICAgICAgIH0KICAgICAgICB9KV0pOwogICAgICB9CiAgICB9LAogICAgZ2VuV29yZExpbWl0OiBmdW5jdGlvbiBnZW5Xb3JkTGltaXQoKSB7CiAgICAgIHZhciBoID0gdGhpcy4kY3JlYXRlRWxlbWVudDsKICAgICAgaWYgKHRoaXMuc2hvd1dvcmRMaW1pdCAmJiB0aGlzLm1heGxlbmd0aCkgewogICAgICAgIHZhciBjb3VudCA9ICh0aGlzLnZhbHVlIHx8ICcnKS5sZW5ndGg7CiAgICAgICAgcmV0dXJuIGgoImRpdiIsIHsKICAgICAgICAgICJjbGFzcyI6IGJlbSgnd29yZC1saW1pdCcpCiAgICAgICAgfSwgW2goInNwYW4iLCB7CiAgICAgICAgICAiY2xhc3MiOiBiZW0oJ3dvcmQtbnVtJykKICAgICAgICB9LCBbY291bnRdKSwgIi8iLCB0aGlzLm1heGxlbmd0aF0pOwogICAgICB9CiAgICB9LAogICAgZ2VuTWVzc2FnZTogZnVuY3Rpb24gZ2VuTWVzc2FnZSgpIHsKICAgICAgdmFyIGggPSB0aGlzLiRjcmVhdGVFbGVtZW50OwogICAgICBpZiAodGhpcy52YW5Gb3JtICYmIHRoaXMudmFuRm9ybS5zaG93RXJyb3JNZXNzYWdlID09PSBmYWxzZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgbWVzc2FnZSA9IHRoaXMuZXJyb3JNZXNzYWdlIHx8IHRoaXMudmFsaWRhdGVNZXNzYWdlOwogICAgICBpZiAobWVzc2FnZSkgewogICAgICAgIHZhciBlcnJvck1lc3NhZ2VBbGlnbiA9IHRoaXMuZ2V0UHJvcCgnZXJyb3JNZXNzYWdlQWxpZ24nKTsKICAgICAgICByZXR1cm4gaCgiZGl2IiwgewogICAgICAgICAgImNsYXNzIjogYmVtKCdlcnJvci1tZXNzYWdlJywgZXJyb3JNZXNzYWdlQWxpZ24pCiAgICAgICAgfSwgW21lc3NhZ2VdKTsKICAgICAgfQogICAgfSwKICAgIGdldFByb3A6IGZ1bmN0aW9uIGdldFByb3Aoa2V5KSB7CiAgICAgIGlmIChpc0RlZih0aGlzW2tleV0pKSB7CiAgICAgICAgcmV0dXJuIHRoaXNba2V5XTsKICAgICAgfQogICAgICBpZiAodGhpcy52YW5Gb3JtICYmIGlzRGVmKHRoaXMudmFuRm9ybVtrZXldKSkgewogICAgICAgIHJldHVybiB0aGlzLnZhbkZvcm1ba2V5XTsKICAgICAgfQogICAgfSwKICAgIGdlbkxhYmVsOiBmdW5jdGlvbiBnZW5MYWJlbCgpIHsKICAgICAgdmFyIGggPSB0aGlzLiRjcmVhdGVFbGVtZW50OwogICAgICB2YXIgY29sb24gPSB0aGlzLmdldFByb3AoJ2NvbG9uJykgPyAnOicgOiAnJzsKICAgICAgaWYgKHRoaXMuc2xvdHMoJ2xhYmVsJykpIHsKICAgICAgICByZXR1cm4gW3RoaXMuc2xvdHMoJ2xhYmVsJyksIGNvbG9uXTsKICAgICAgfQogICAgICBpZiAodGhpcy5sYWJlbCkgewogICAgICAgIHJldHVybiBoKCJzcGFuIiwgW3RoaXMubGFiZWwgKyBjb2xvbl0pOwogICAgICB9CiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgIHZhciBfYmVtOwogICAgdmFyIGggPSBhcmd1bWVudHNbMF07CiAgICB2YXIgc2xvdHMgPSB0aGlzLnNsb3RzOwogICAgdmFyIGRpc2FibGVkID0gdGhpcy5nZXRQcm9wKCdkaXNhYmxlZCcpOwogICAgdmFyIGxhYmVsQWxpZ24gPSB0aGlzLmdldFByb3AoJ2xhYmVsQWxpZ24nKTsKICAgIHZhciBzY29wZWRTbG90cyA9IHsKICAgICAgaWNvbjogdGhpcy5nZW5MZWZ0SWNvbgogICAgfTsKICAgIHZhciBMYWJlbCA9IHRoaXMuZ2VuTGFiZWwoKTsKICAgIGlmIChMYWJlbCkgewogICAgICBzY29wZWRTbG90cy50aXRsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gTGFiZWw7CiAgICAgIH07CiAgICB9CiAgICB2YXIgZXh0cmEgPSB0aGlzLnNsb3RzKCdleHRyYScpOwogICAgaWYgKGV4dHJhKSB7CiAgICAgIHNjb3BlZFNsb3RzLmV4dHJhID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBleHRyYTsKICAgICAgfTsKICAgIH0KICAgIHJldHVybiBoKENlbGwsIHsKICAgICAgImF0dHJzIjogewogICAgICAgICJpY29uIjogdGhpcy5sZWZ0SWNvbiwKICAgICAgICAic2l6ZSI6IHRoaXMuc2l6ZSwKICAgICAgICAiY2VudGVyIjogdGhpcy5jZW50ZXIsCiAgICAgICAgImJvcmRlciI6IHRoaXMuYm9yZGVyLAogICAgICAgICJpc0xpbmsiOiB0aGlzLmlzTGluaywKICAgICAgICAicmVxdWlyZWQiOiB0aGlzLnJlcXVpcmVkLAogICAgICAgICJjbGlja2FibGUiOiB0aGlzLmNsaWNrYWJsZSwKICAgICAgICAidGl0bGVTdHlsZSI6IHRoaXMubGFiZWxTdHlsZSwKICAgICAgICAidmFsdWVDbGFzcyI6IGJlbSgndmFsdWUnKSwKICAgICAgICAidGl0bGVDbGFzcyI6IFtiZW0oJ2xhYmVsJywgbGFiZWxBbGlnbiksIHRoaXMubGFiZWxDbGFzc10sCiAgICAgICAgImFycm93RGlyZWN0aW9uIjogdGhpcy5hcnJvd0RpcmVjdGlvbgogICAgICB9LAogICAgICAic2NvcGVkU2xvdHMiOiBzY29wZWRTbG90cywKICAgICAgImNsYXNzIjogYmVtKChfYmVtID0gewogICAgICAgIGVycm9yOiB0aGlzLnNob3dFcnJvciwKICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQKICAgICAgfSwgX2JlbVsibGFiZWwtIiArIGxhYmVsQWxpZ25dID0gbGFiZWxBbGlnbiwgX2JlbVsnbWluLWhlaWdodCddID0gdGhpcy50eXBlID09PSAndGV4dGFyZWEnICYmICF0aGlzLmF1dG9zaXplLCBfYmVtKSksCiAgICAgICJvbiI6IHsKICAgICAgICAiY2xpY2siOiB0aGlzLm9uQ2xpY2sKICAgICAgfQogICAgfSwgW2goImRpdiIsIHsKICAgICAgImNsYXNzIjogYmVtKCdib2R5JykKICAgIH0sIFt0aGlzLmdlbklucHV0KCksIHRoaXMuc2hvd0NsZWFyICYmIGgoSWNvbiwgewogICAgICAiYXR0cnMiOiB7CiAgICAgICAgIm5hbWUiOiAiY2xlYXIiCiAgICAgIH0sCiAgICAgICJjbGFzcyI6IGJlbSgnY2xlYXInKSwKICAgICAgIm9uIjogewogICAgICAgICJ0b3VjaHN0YXJ0IjogdGhpcy5vbkNsZWFyCiAgICAgIH0KICAgIH0pLCB0aGlzLmdlblJpZ2h0SWNvbigpLCBzbG90cygnYnV0dG9uJykgJiYgaCgiZGl2IiwgewogICAgICAiY2xhc3MiOiBiZW0oJ2J1dHRvbicpCiAgICB9LCBbc2xvdHMoJ2J1dHRvbicpXSldKSwgdGhpcy5nZW5Xb3JkTGltaXQoKSwgdGhpcy5nZW5NZXNzYWdlKCldKTsKICB9Cn0pOw=="},null]}