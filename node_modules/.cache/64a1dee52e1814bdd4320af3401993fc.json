{"remainingRequest":"/Users/adamliu/vant/node_modules/babel-loader/lib/index.js!/Users/adamliu/vant/src/uploader/index.js","dependencies":[{"path":"/Users/adamliu/vant/src/uploader/index.js","mtime":1694509705062},{"path":"/Users/adamliu/vant/babel.config.js","mtime":1694509704583},{"path":"/Users/adamliu/vant/node_modules/cache-loader/dist/cjs.js","mtime":1694509793427},{"path":"/Users/adamliu/vant/node_modules/babel-loader/lib/index.js","mtime":1694509794381}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9leHRlbmRzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMiOwovLyBVdGlscwppbXBvcnQgeyBjcmVhdGVOYW1lc3BhY2UsIGFkZFVuaXQsIG5vb3AsIGlzUHJvbWlzZSwgaXNEZWYgfSBmcm9tICcuLi91dGlscyc7CmltcG9ydCB7IHRvQXJyYXksIHJlYWRGaWxlIGFzIF9yZWFkRmlsZSwgaXNPdmVyc2l6ZSwgaXNJbWFnZUZpbGUgfSBmcm9tICcuL3V0aWxzJzsKCi8vIE1peGlucwppbXBvcnQgeyBGaWVsZE1peGluIH0gZnJvbSAnLi4vbWl4aW5zL2ZpZWxkJzsKCi8vIENvbXBvbmVudHMKaW1wb3J0IEljb24gZnJvbSAnLi4vaWNvbic7CmltcG9ydCBJbWFnZSBmcm9tICcuLi9pbWFnZSc7CmltcG9ydCBMb2FkaW5nIGZyb20gJy4uL2xvYWRpbmcnOwppbXBvcnQgSW1hZ2VQcmV2aWV3IGZyb20gJy4uL2ltYWdlLXByZXZpZXcnOwp2YXIgX2NyZWF0ZU5hbWVzcGFjZSA9IGNyZWF0ZU5hbWVzcGFjZSgndXBsb2FkZXInKSwKICBjcmVhdGVDb21wb25lbnQgPSBfY3JlYXRlTmFtZXNwYWNlWzBdLAogIGJlbSA9IF9jcmVhdGVOYW1lc3BhY2VbMV07CmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbXBvbmVudCh7CiAgaW5oZXJpdEF0dHJzOiBmYWxzZSwKICBtaXhpbnM6IFtGaWVsZE1peGluXSwKICBtb2RlbDogewogICAgcHJvcDogJ2ZpbGVMaXN0JwogIH0sCiAgcHJvcHM6IHsKICAgIGRpc2FibGVkOiBCb29sZWFuLAogICAgcmVhZG9ubHk6IEJvb2xlYW4sCiAgICBsYXp5TG9hZDogQm9vbGVhbiwKICAgIHVwbG9hZFRleHQ6IFN0cmluZywKICAgIGFmdGVyUmVhZDogRnVuY3Rpb24sCiAgICBiZWZvcmVSZWFkOiBGdW5jdGlvbiwKICAgIGJlZm9yZURlbGV0ZTogRnVuY3Rpb24sCiAgICBwcmV2aWV3U2l6ZTogW051bWJlciwgU3RyaW5nXSwKICAgIHByZXZpZXdPcHRpb25zOiBPYmplY3QsCiAgICBuYW1lOiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgYWNjZXB0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2ltYWdlLyonCiAgICB9LAogICAgZmlsZUxpc3Q6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIG1heFNpemU6IHsKICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nLCBGdW5jdGlvbl0sCiAgICAgIGRlZmF1bHQ6IE51bWJlci5NQVhfVkFMVUUKICAgIH0sCiAgICBtYXhDb3VudDogewogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICBkZWZhdWx0OiBOdW1iZXIuTUFYX1ZBTFVFCiAgICB9LAogICAgZGVsZXRhYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBzaG93VXBsb2FkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBwcmV2aWV3SW1hZ2U6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHByZXZpZXdGdWxsSW1hZ2U6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIGltYWdlRml0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2NvdmVyJwogICAgfSwKICAgIHJlc3VsdFR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnZGF0YVVybCcKICAgIH0sCiAgICB1cGxvYWRJY29uOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ3Bob3RvZ3JhcGgnCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgcHJldmlld1NpemVXaXRoVW5pdDogZnVuY3Rpb24gcHJldmlld1NpemVXaXRoVW5pdCgpIHsKICAgICAgcmV0dXJuIGFkZFVuaXQodGhpcy5wcmV2aWV3U2l6ZSk7CiAgICB9LAogICAgLy8gZm9yIGZvcm0KICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZmlsZUxpc3Q7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy51cmxzID0gW107CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy51cmxzLmZvckVhY2goZnVuY3Rpb24gKHVybCkgewogICAgICByZXR1cm4gVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREZXRhaWw6IGZ1bmN0aW9uIGdldERldGFpbChpbmRleCkgewogICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgewogICAgICAgIGluZGV4ID0gdGhpcy5maWxlTGlzdC5sZW5ndGg7CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgaW5kZXg6IGluZGV4CiAgICAgIH07CiAgICB9LAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBmaWxlcyA9IGV2ZW50LnRhcmdldC5maWxlczsKICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgIWZpbGVzLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBmaWxlcyA9IGZpbGVzLmxlbmd0aCA9PT0gMSA/IGZpbGVzWzBdIDogW10uc2xpY2UuY2FsbChmaWxlcyk7CiAgICAgIGlmICh0aGlzLmJlZm9yZVJlYWQpIHsKICAgICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLmJlZm9yZVJlYWQoZmlsZXMsIHRoaXMuZ2V0RGV0YWlsKCkpOwogICAgICAgIGlmICghcmVzcG9uc2UpIHsKICAgICAgICAgIHRoaXMucmVzZXRJbnB1dCgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoaXNQcm9taXNlKHJlc3BvbnNlKSkgewogICAgICAgICAgcmVzcG9uc2UudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgICAgIF90aGlzLnJlYWRGaWxlKGRhdGEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzLnJlYWRGaWxlKGZpbGVzKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2godGhpcy5yZXNldElucHV0KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5yZWFkRmlsZShmaWxlcyk7CiAgICB9LAogICAgcmVhZEZpbGU6IGZ1bmN0aW9uIHJlYWRGaWxlKGZpbGVzKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgb3ZlcnNpemUgPSBpc092ZXJzaXplKGZpbGVzLCB0aGlzLm1heFNpemUpOwogICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWxlcykpIHsKICAgICAgICB2YXIgbWF4Q291bnQgPSB0aGlzLm1heENvdW50IC0gdGhpcy5maWxlTGlzdC5sZW5ndGg7CiAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IG1heENvdW50KSB7CiAgICAgICAgICBmaWxlcyA9IGZpbGVzLnNsaWNlKDAsIG1heENvdW50KTsKICAgICAgICB9CiAgICAgICAgUHJvbWlzZS5hbGwoZmlsZXMubWFwKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgICByZXR1cm4gX3JlYWRGaWxlKGZpbGUsIF90aGlzMi5yZXN1bHRUeXBlKTsKICAgICAgICB9KSkudGhlbihmdW5jdGlvbiAoY29udGVudHMpIHsKICAgICAgICAgIHZhciBmaWxlTGlzdCA9IGZpbGVzLm1hcChmdW5jdGlvbiAoZmlsZSwgaW5kZXgpIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHsKICAgICAgICAgICAgICBmaWxlOiBmaWxlLAogICAgICAgICAgICAgIHN0YXR1czogJycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJycKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKGNvbnRlbnRzW2luZGV4XSkgewogICAgICAgICAgICAgIHJlc3VsdC5jb250ZW50ID0gY29udGVudHNbaW5kZXhdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzMi5vbkFmdGVyUmVhZChmaWxlTGlzdCwgb3ZlcnNpemUpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIF9yZWFkRmlsZShmaWxlcywgdGhpcy5yZXN1bHRUeXBlKS50aGVuKGZ1bmN0aW9uIChjb250ZW50KSB7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gewogICAgICAgICAgICBmaWxlOiBmaWxlcywKICAgICAgICAgICAgc3RhdHVzOiAnJywKICAgICAgICAgICAgbWVzc2FnZTogJycKICAgICAgICAgIH07CiAgICAgICAgICBpZiAoY29udGVudCkgewogICAgICAgICAgICByZXN1bHQuY29udGVudCA9IGNvbnRlbnQ7CiAgICAgICAgICB9CiAgICAgICAgICBfdGhpczIub25BZnRlclJlYWQocmVzdWx0LCBvdmVyc2l6ZSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBvbkFmdGVyUmVhZDogZnVuY3Rpb24gb25BZnRlclJlYWQoZmlsZXMsIG92ZXJzaXplKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB0aGlzLnJlc2V0SW5wdXQoKTsKICAgICAgdmFyIHZhbGlkRmlsZXMgPSBmaWxlczsKICAgICAgaWYgKG92ZXJzaXplKSB7CiAgICAgICAgdmFyIG92ZXJzaXplRmlsZXMgPSBmaWxlczsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWxlcykpIHsKICAgICAgICAgIG92ZXJzaXplRmlsZXMgPSBbXTsKICAgICAgICAgIHZhbGlkRmlsZXMgPSBbXTsKICAgICAgICAgIGZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKGl0ZW0uZmlsZSkgewogICAgICAgICAgICAgIGlmIChpc092ZXJzaXplKGl0ZW0uZmlsZSwgX3RoaXMzLm1heFNpemUpKSB7CiAgICAgICAgICAgICAgICBvdmVyc2l6ZUZpbGVzLnB1c2goaXRlbSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhbGlkRmlsZXMucHVzaChpdGVtKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YWxpZEZpbGVzID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgdGhpcy4kZW1pdCgnb3ZlcnNpemUnLCBvdmVyc2l6ZUZpbGVzLCB0aGlzLmdldERldGFpbCgpKTsKICAgICAgfQogICAgICB2YXIgaXNWYWxpZEZpbGVzID0gQXJyYXkuaXNBcnJheSh2YWxpZEZpbGVzKSA/IEJvb2xlYW4odmFsaWRGaWxlcy5sZW5ndGgpIDogQm9vbGVhbih2YWxpZEZpbGVzKTsKICAgICAgaWYgKGlzVmFsaWRGaWxlcykgewogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgW10uY29uY2F0KHRoaXMuZmlsZUxpc3QsIHRvQXJyYXkodmFsaWRGaWxlcykpKTsKICAgICAgICBpZiAodGhpcy5hZnRlclJlYWQpIHsKICAgICAgICAgIHRoaXMuYWZ0ZXJSZWFkKHZhbGlkRmlsZXMsIHRoaXMuZ2V0RGV0YWlsKCkpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG9uRGVsZXRlOiBmdW5jdGlvbiBvbkRlbGV0ZShmaWxlLCBpbmRleCkgewogICAgICB2YXIgX2ZpbGUkYmVmb3JlRGVsZXRlLAogICAgICAgIF90aGlzNCA9IHRoaXM7CiAgICAgIHZhciBiZWZvcmVEZWxldGUgPSAoX2ZpbGUkYmVmb3JlRGVsZXRlID0gZmlsZS5iZWZvcmVEZWxldGUpICE9IG51bGwgPyBfZmlsZSRiZWZvcmVEZWxldGUgOiB0aGlzLmJlZm9yZURlbGV0ZTsKICAgICAgaWYgKGJlZm9yZURlbGV0ZSkgewogICAgICAgIHZhciByZXNwb25zZSA9IGJlZm9yZURlbGV0ZShmaWxlLCB0aGlzLmdldERldGFpbChpbmRleCkpOwogICAgICAgIGlmICghcmVzcG9uc2UpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKGlzUHJvbWlzZShyZXNwb25zZSkpIHsKICAgICAgICAgIHJlc3BvbnNlLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpczQuZGVsZXRlRmlsZShmaWxlLCBpbmRleCk7CiAgICAgICAgICB9KS5jYXRjaChub29wKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5kZWxldGVGaWxlKGZpbGUsIGluZGV4KTsKICAgIH0sCiAgICBkZWxldGVGaWxlOiBmdW5jdGlvbiBkZWxldGVGaWxlKGZpbGUsIGluZGV4KSB7CiAgICAgIHZhciBmaWxlTGlzdCA9IHRoaXMuZmlsZUxpc3Quc2xpY2UoMCk7CiAgICAgIGZpbGVMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgZmlsZUxpc3QpOwogICAgICB0aGlzLiRlbWl0KCdkZWxldGUnLCBmaWxlLCB0aGlzLmdldERldGFpbChpbmRleCkpOwogICAgfSwKICAgIHJlc2V0SW5wdXQ6IGZ1bmN0aW9uIHJlc2V0SW5wdXQoKSB7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICAgIGlmICh0aGlzLiRyZWZzLmlucHV0KSB7CiAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC52YWx1ZSA9ICcnOwogICAgICB9CiAgICB9LAogICAgb25DbGlja1VwbG9hZDogZnVuY3Rpb24gb25DbGlja1VwbG9hZChldmVudCkgewogICAgICB0aGlzLiRlbWl0KCdjbGljay11cGxvYWQnLCBldmVudCk7CiAgICB9LAogICAgb25QcmV2aWV3SW1hZ2U6IGZ1bmN0aW9uIG9uUHJldmlld0ltYWdlKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIGlmICghdGhpcy5wcmV2aWV3RnVsbEltYWdlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBpbWFnZUZpbGVzID0gdGhpcy5maWxlTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXNJbWFnZUZpbGUoaXRlbSk7CiAgICAgIH0pOwogICAgICB2YXIgaW1hZ2VDb250ZW50cyA9IGltYWdlRmlsZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0uZmlsZSAmJiAhaXRlbS51cmwgJiYgaXRlbS5zdGF0dXMgIT09ICdmYWlsZWQnKSB7CiAgICAgICAgICBpdGVtLnVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoaXRlbS5maWxlKTsKICAgICAgICAgIF90aGlzNS51cmxzLnB1c2goaXRlbS51cmwpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gaXRlbS51cmw7CiAgICAgIH0pOwogICAgICB0aGlzLmltYWdlUHJldmlldyA9IEltYWdlUHJldmlldyhfZXh0ZW5kcyh7CiAgICAgICAgaW1hZ2VzOiBpbWFnZUNvbnRlbnRzLAogICAgICAgIHN0YXJ0UG9zaXRpb246IGltYWdlRmlsZXMuaW5kZXhPZihpdGVtKSwKICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbiBvbkNsb3NlKCkgewogICAgICAgICAgX3RoaXM1LiRlbWl0KCdjbG9zZS1wcmV2aWV3Jyk7CiAgICAgICAgfQogICAgICB9LCB0aGlzLnByZXZpZXdPcHRpb25zKSk7CiAgICB9LAogICAgLy8gQGV4cG9zZWQtYXBpCiAgICBjbG9zZUltYWdlUHJldmlldzogZnVuY3Rpb24gY2xvc2VJbWFnZVByZXZpZXcoKSB7CiAgICAgIGlmICh0aGlzLmltYWdlUHJldmlldykgewogICAgICAgIHRoaXMuaW1hZ2VQcmV2aWV3LmNsb3NlKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyBAZXhwb3NlZC1hcGkKICAgIGNob29zZUZpbGU6IGZ1bmN0aW9uIGNob29zZUZpbGUoKSB7CiAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICAgIGlmICh0aGlzLiRyZWZzLmlucHV0KSB7CiAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC5jbGljaygpOwogICAgICB9CiAgICB9LAogICAgZ2VuUHJldmlld01hc2s6IGZ1bmN0aW9uIGdlblByZXZpZXdNYXNrKGl0ZW0pIHsKICAgICAgdmFyIGggPSB0aGlzLiRjcmVhdGVFbGVtZW50OwogICAgICB2YXIgc3RhdHVzID0gaXRlbS5zdGF0dXMsCiAgICAgICAgbWVzc2FnZSA9IGl0ZW0ubWVzc2FnZTsKICAgICAgaWYgKHN0YXR1cyA9PT0gJ3VwbG9hZGluZycgfHwgc3RhdHVzID09PSAnZmFpbGVkJykgewogICAgICAgIHZhciBNYXNrSWNvbiA9IHN0YXR1cyA9PT0gJ2ZhaWxlZCcgPyBoKEljb24sIHsKICAgICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICAgIm5hbWUiOiAiY2xvc2UiCiAgICAgICAgICB9LAogICAgICAgICAgImNsYXNzIjogYmVtKCdtYXNrLWljb24nKQogICAgICAgIH0pIDogaChMb2FkaW5nLCB7CiAgICAgICAgICAiY2xhc3MiOiBiZW0oJ2xvYWRpbmcnKQogICAgICAgIH0pOwogICAgICAgIHZhciBzaG93TWVzc2FnZSA9IGlzRGVmKG1lc3NhZ2UpICYmIG1lc3NhZ2UgIT09ICcnOwogICAgICAgIHJldHVybiBoKCJkaXYiLCB7CiAgICAgICAgICAiY2xhc3MiOiBiZW0oJ21hc2snKQogICAgICAgIH0sIFtNYXNrSWNvbiwgc2hvd01lc3NhZ2UgJiYgaCgiZGl2IiwgewogICAgICAgICAgImNsYXNzIjogYmVtKCdtYXNrLW1lc3NhZ2UnKQogICAgICAgIH0sIFttZXNzYWdlXSldKTsKICAgICAgfQogICAgfSwKICAgIGdlblByZXZpZXdJdGVtOiBmdW5jdGlvbiBnZW5QcmV2aWV3SXRlbShpdGVtLCBpbmRleCkgewogICAgICB2YXIgX2l0ZW0kZGVsZXRhYmxlLAogICAgICAgIF90aGlzNiA9IHRoaXMsCiAgICAgICAgX2l0ZW0kcHJldmlld1NpemUsCiAgICAgICAgX2l0ZW0kaW1hZ2VGaXQ7CiAgICAgIHZhciBoID0gdGhpcy4kY3JlYXRlRWxlbWVudDsKICAgICAgdmFyIGRlbGV0ZUFibGUgPSAoX2l0ZW0kZGVsZXRhYmxlID0gaXRlbS5kZWxldGFibGUpICE9IG51bGwgPyBfaXRlbSRkZWxldGFibGUgOiB0aGlzLmRlbGV0YWJsZTsKICAgICAgdmFyIHNob3dEZWxldGUgPSBpdGVtLnN0YXR1cyAhPT0gJ3VwbG9hZGluZycgJiYgZGVsZXRlQWJsZTsKICAgICAgdmFyIERlbGV0ZUljb24gPSBzaG93RGVsZXRlICYmIGgoImRpdiIsIHsKICAgICAgICAiY2xhc3MiOiBiZW0oJ3ByZXZpZXctZGVsZXRlJyksCiAgICAgICAgIm9uIjogewogICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIF90aGlzNi5vbkRlbGV0ZShpdGVtLCBpbmRleCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBbaChJY29uLCB7CiAgICAgICAgImF0dHJzIjogewogICAgICAgICAgIm5hbWUiOiAiY3Jvc3MiCiAgICAgICAgfSwKICAgICAgICAiY2xhc3MiOiBiZW0oJ3ByZXZpZXctZGVsZXRlLWljb24nKQogICAgICB9KV0pOwogICAgICB2YXIgUHJldmlld0NvdmVyQ29udGVudCA9IHRoaXMuc2xvdHMoJ3ByZXZpZXctY292ZXInLCBfZXh0ZW5kcyh7CiAgICAgICAgaW5kZXg6IGluZGV4CiAgICAgIH0sIGl0ZW0pKTsKICAgICAgdmFyIFByZXZpZXdDb3ZlciA9IFByZXZpZXdDb3ZlckNvbnRlbnQgJiYgaCgiZGl2IiwgewogICAgICAgICJjbGFzcyI6IGJlbSgncHJldmlldy1jb3ZlcicpCiAgICAgIH0sIFtQcmV2aWV3Q292ZXJDb250ZW50XSk7CiAgICAgIHZhciBwcmV2aWV3U2l6ZSA9IChfaXRlbSRwcmV2aWV3U2l6ZSA9IGl0ZW0ucHJldmlld1NpemUpICE9IG51bGwgPyBfaXRlbSRwcmV2aWV3U2l6ZSA6IHRoaXMucHJldmlld1NpemU7CiAgICAgIHZhciBpbWFnZUZpdCA9IChfaXRlbSRpbWFnZUZpdCA9IGl0ZW0uaW1hZ2VGaXQpICE9IG51bGwgPyBfaXRlbSRpbWFnZUZpdCA6IHRoaXMuaW1hZ2VGaXQ7CiAgICAgIHZhciBQcmV2aWV3ID0gaXNJbWFnZUZpbGUoaXRlbSkgPyBoKEltYWdlLCB7CiAgICAgICAgImF0dHJzIjogewogICAgICAgICAgImZpdCI6IGltYWdlRml0LAogICAgICAgICAgInNyYyI6IGl0ZW0uY29udGVudCB8fCBpdGVtLnVybCwKICAgICAgICAgICJ3aWR0aCI6IHByZXZpZXdTaXplLAogICAgICAgICAgImhlaWdodCI6IHByZXZpZXdTaXplLAogICAgICAgICAgImxhenlMb2FkIjogdGhpcy5sYXp5TG9hZAogICAgICAgIH0sCiAgICAgICAgImNsYXNzIjogYmVtKCdwcmV2aWV3LWltYWdlJyksCiAgICAgICAgIm9uIjogewogICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgIF90aGlzNi5vblByZXZpZXdJbWFnZShpdGVtKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIFtQcmV2aWV3Q292ZXJdKSA6IGgoImRpdiIsIHsKICAgICAgICAiY2xhc3MiOiBiZW0oJ2ZpbGUnKSwKICAgICAgICAic3R5bGUiOiB7CiAgICAgICAgICB3aWR0aDogdGhpcy5wcmV2aWV3U2l6ZVdpdGhVbml0LAogICAgICAgICAgaGVpZ2h0OiB0aGlzLnByZXZpZXdTaXplV2l0aFVuaXQKICAgICAgICB9CiAgICAgIH0sIFtoKEljb24sIHsKICAgICAgICAiY2xhc3MiOiBiZW0oJ2ZpbGUtaWNvbicpLAogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJuYW1lIjogImRlc2NyaXB0aW9uIgogICAgICAgIH0KICAgICAgfSksIGgoImRpdiIsIHsKICAgICAgICAiY2xhc3MiOiBbYmVtKCdmaWxlLW5hbWUnKSwgJ3Zhbi1lbGxpcHNpcyddCiAgICAgIH0sIFtpdGVtLmZpbGUgPyBpdGVtLmZpbGUubmFtZSA6IGl0ZW0udXJsXSksIFByZXZpZXdDb3Zlcl0pOwogICAgICByZXR1cm4gaCgiZGl2IiwgewogICAgICAgICJjbGFzcyI6IGJlbSgncHJldmlldycpLAogICAgICAgICJvbiI6IHsKICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICBfdGhpczYuJGVtaXQoJ2NsaWNrLXByZXZpZXcnLCBpdGVtLCBfdGhpczYuZ2V0RGV0YWlsKGluZGV4KSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBbUHJldmlldywgdGhpcy5nZW5QcmV2aWV3TWFzayhpdGVtKSwgRGVsZXRlSWNvbl0pOwogICAgfSwKICAgIGdlblByZXZpZXdMaXN0OiBmdW5jdGlvbiBnZW5QcmV2aWV3TGlzdCgpIHsKICAgICAgaWYgKHRoaXMucHJldmlld0ltYWdlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZmlsZUxpc3QubWFwKHRoaXMuZ2VuUHJldmlld0l0ZW0pOwogICAgICB9CiAgICB9LAogICAgZ2VuVXBsb2FkOiBmdW5jdGlvbiBnZW5VcGxvYWQoKSB7CiAgICAgIHZhciBoID0gdGhpcy4kY3JlYXRlRWxlbWVudDsKICAgICAgaWYgKHRoaXMuZmlsZUxpc3QubGVuZ3RoID49IHRoaXMubWF4Q291bnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIHNsb3QgPSB0aGlzLnNsb3RzKCk7CiAgICAgIHZhciBJbnB1dCA9IHRoaXMucmVhZG9ubHkgPyBudWxsIDogaCgiaW5wdXQiLCB7CiAgICAgICAgImF0dHJzIjogX2V4dGVuZHMoe30sIHRoaXMuJGF0dHJzLCB7CiAgICAgICAgICAidHlwZSI6ICJmaWxlIiwKICAgICAgICAgICJhY2NlcHQiOiB0aGlzLmFjY2VwdCwKICAgICAgICAgICJkaXNhYmxlZCI6IHRoaXMuZGlzYWJsZWQKICAgICAgICB9KSwKICAgICAgICAicmVmIjogImlucHV0IiwKICAgICAgICAiY2xhc3MiOiBiZW0oJ2lucHV0JyksCiAgICAgICAgIm9uIjogewogICAgICAgICAgImNoYW5nZSI6IHRoaXMub25DaGFuZ2UKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAoc2xvdCkgewogICAgICAgIHJldHVybiBoKCJkaXYiLCB7CiAgICAgICAgICAiY2xhc3MiOiBiZW0oJ2lucHV0LXdyYXBwZXInKSwKICAgICAgICAgICJrZXkiOiAiaW5wdXQtd3JhcHBlciIsCiAgICAgICAgICAib24iOiB7CiAgICAgICAgICAgICJjbGljayI6IHRoaXMub25DbGlja1VwbG9hZAogICAgICAgICAgfQogICAgICAgIH0sIFtzbG90LCBJbnB1dF0pOwogICAgICB9CiAgICAgIHZhciBzdHlsZTsKICAgICAgaWYgKHRoaXMucHJldmlld1NpemUpIHsKICAgICAgICB2YXIgc2l6ZSA9IHRoaXMucHJldmlld1NpemVXaXRoVW5pdDsKICAgICAgICBzdHlsZSA9IHsKICAgICAgICAgIHdpZHRoOiBzaXplLAogICAgICAgICAgaGVpZ2h0OiBzaXplCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gaCgiZGl2IiwgewogICAgICAgICJkaXJlY3RpdmVzIjogW3sKICAgICAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgICAgIHZhbHVlOiB0aGlzLnNob3dVcGxvYWQKICAgICAgICB9XSwKICAgICAgICAiY2xhc3MiOiBiZW0oJ3VwbG9hZCcsIHsKICAgICAgICAgIHJlYWRvbmx5OiB0aGlzLnJlYWRvbmx5CiAgICAgICAgfSksCiAgICAgICAgInN0eWxlIjogc3R5bGUsCiAgICAgICAgIm9uIjogewogICAgICAgICAgImNsaWNrIjogdGhpcy5vbkNsaWNrVXBsb2FkCiAgICAgICAgfQogICAgICB9LCBbaChJY29uLCB7CiAgICAgICAgImF0dHJzIjogewogICAgICAgICAgIm5hbWUiOiB0aGlzLnVwbG9hZEljb24KICAgICAgICB9LAogICAgICAgICJjbGFzcyI6IGJlbSgndXBsb2FkLWljb24nKQogICAgICB9KSwgdGhpcy51cGxvYWRUZXh0ICYmIGgoInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogYmVtKCd1cGxvYWQtdGV4dCcpCiAgICAgIH0sIFt0aGlzLnVwbG9hZFRleHRdKSwgSW5wdXRdKTsKICAgIH0KICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgdmFyIGggPSBhcmd1bWVudHNbMF07CiAgICByZXR1cm4gaCgiZGl2IiwgewogICAgICAiY2xhc3MiOiBiZW0oKQogICAgfSwgW2goImRpdiIsIHsKICAgICAgImNsYXNzIjogYmVtKCd3cmFwcGVyJywgewogICAgICAgIGRpc2FibGVkOiB0aGlzLmRpc2FibGVkCiAgICAgIH0pCiAgICB9LCBbdGhpcy5nZW5QcmV2aWV3TGlzdCgpLCB0aGlzLmdlblVwbG9hZCgpXSldKTsKICB9Cn0pOw=="},null]}